/*!
 *
 * Bryntum TaskBoard 5.6.2
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
import{Base as w,BrowserHelper as U,Delayable_default as j,DynamicObject as T,FunctionHelper as D,ObjectHelper as m,StringHelper as E,TextField as L,__publicField as v}from"./chunk-MZVS5JQA.js";var z=s=>class extends(s||w){static get $name(){return"Featureable"}static get configurable(){return{features:null}}static get declarable(){return["featureable"]}static setupFeatureable(e){const t={ownerName:"client",...e.featureable};t.factory.initClass(),Reflect.defineProperty(e,"featureable",{get(){return t}})}doDestroy(){var e;const t=this.features;super.doDestroy();for(const r in t){const n=t[r];(e=n.destroy)==null||e.call(n)}}hasFeature(e){var t;return!!((t=this.features)!=null&&t[e])}changeFeatures(e,t){if(this.isDestroying)return;const r=this,{featureable:n}=r.constructor,i=r.$features||(r.$features=new T({configName:"features",factory:n.factory,owner:r,ownerName:n.ownerName}));if(i.update(e),!t)return i.target}get widgetClass(){}getCurrentConfig(e){const t=super.getCurrentConfig(e),{features:r}=t;if(r)for(const n in r)Object.keys(r[n]).length===0&&(r[n]=!0);return t}},{defineProperty:W}=Object,{hasOwn:P}=m,$=Symbol("fencible"),H=[],S=s=>Array.from(new Set(s)),_=s=>s?S(E.split(s)):H,I=(s,a,e)=>{e===!0&&(e=a),m.isObject(e)||(e={all:e});let t=_(e.any);const r=_(e.all),n=e.lock?_(e.lock):S(r.concat(t)),i=a+"Impl",l=function(...u){const o=this,c=P(o,$)?o[$]:o[$]={},p=f=>!c[f];if(r.every(p)&&(!t||t.some(p)))try{return n.forEach(f=>c[f]=(c[f]||0)+1),o[i](...u)}finally{n.forEach(f=>--c[f])}};t=t.length?t:null,!s[i]&&W(s,i,{configurable:!0,value:s[a]}),W(s,a,{configurable:!0,value:l})},k=s=>{var a;return a=class extends(s||w){static setupFenced(e){let{fenced:t}=e;const r=t.static,n=[];r&&(t={...t},delete t.static,n.push([r,e])),n.push([t,e.prototype]);for(const[i,l]of n)for(const u in i)I(l,u,i[u])}get widgetClass(){}},v(a,"$name","Fencible"),v(a,"declarable",["fenced"]),a},y=class extends L{static get configurable(){return{field:null,store:null,filterFunction:null,clearable:!0,revertOnEscape:!0,ignoreParentReadOnly:!0,keyStrokeChangeDelay:100,onChange({value:s}){const{store:a,field:e,filterFunction:t}=this;if(a){const r=`${e||this.id}-Filter`;if(s.length===0)a.removeFilter(r);else{let n;t?n=i=>t(i,s):(s=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=i=>{var l;return(l=i.getValue(e))==null?void 0:l.match(new RegExp(s,"i"))}),a.filter({id:r,filterBy:n})}}}}}updateValue(s,a){super.updateValue(s,a),s&&this.isConfiguring&&this.onChange({value:s})}};v(y,"$name","FilterField"),v(y,"type","filterfield"),y.initClass(),y._$name="FilterField";var M=[],V=s=>s[0]!=="*",B=(s,a)=>{const e=s[a]||null;return delete s[a],e},A=s=>s.responsiveRoot,O={number:s=>({width:a})=>a<=s&&s},N=s=>(delete s.once,{callback:B(s,"callback"),configs:s,when:B(s,"when")}),x=(s,...a)=>{const e=a.flatMap(n=>(n==null?void 0:n.once)||M),t=s.mergeConfigs(...a),r=N(t);return r.once=e.length?N(s.mergeConfigs(...e)):null,r},Y=(s,a)=>{let e,t=Proxy.revocable(s,{get(i,l){return e&&(e[l]=!0),s[l]}}),r=D.after(s,"onConfigChange",(i,{name:l})=>{e!=null&&e[l]&&a()}),n=s.ion({resize:()=>{a()}});return s.monitorResize=!0,{widget:s,get object(){return t==null?void 0:t.proxy},destroy(){t&&(t.revoke(),r(),n(),t=r=n=null)},reset(){e=Object.create(null)}}},q=s=>{var a;return a=class extends(s||w).mixin(j,k){get isResponsivePending(){return this.responsiveUpdateCount===0&&this.hasConfig("responsive")}get isResponsiveUpdating(){var e;return this._responsiveUpdating||((e=this.responsiveWidget)==null?void 0:e._responsiveUpdating)}updateResponsive(e){var t;const r=this,n=r.constructor,{responsiveDefaults:i}=r,l=Array.from(new Set(m.keys(e).concat(m.keys(i)))).filter(V);let u=null,o,c,p,f;if(e){u={"*":x(n,i["*"],e["*"])};for(c of l)p=e[c],p!==null&&p!==!1&&(o=o||p&&"when"in p,u[c]=x(n,i["*"],i[c],e["*"],p),f=u[c].when,u[c].when=((t=O[typeof f])==null?void 0:t.call(O,f))||f)}r.$responsiveStates=u,r.$responsiveWhen=o,r.syncResponsiveWidget()}updateResponsiveState(e,t){var r,n,i,l,u;const o=this,{$responsiveStates:c}=o,p=++o.responsiveStateChanges===1,f=(r=o.element)==null?void 0:r.classList,R=c["*"],b=c[e]||R,h=p&&(b.once||R.once),F=p&&o.isStateful,C=o.responsiveWidget;let g=b.configs,d=h==null?void 0:h.configs;d&&(g=g?o.constructor.mergeConfigs(g,d):d),t&&(f==null||f.remove(`b-responsive-${t.toLowerCase()}`)),e&&(f==null||f.add(`b-responsive-${e.toLowerCase()}`)),F&&(d=o.loadStatefulData(),d&&(g=g?o.constructor.mergeConfigs(g,d):d),o.suspendStateful()),o._responsiveUpdating=!0;try{(n=o.trigger)==null||n.call(o,"beforeResponsiveStateChange",{state:e,oldState:t,target:C}),g&&o.setConfig(g),(i=b.callback)==null||i.call(b,{source:o,state:e,oldState:t,target:C,initial:p}),(l=h==null?void 0:h.callback)==null||l.call(h,{source:o,state:e,oldState:t,target:C,initial:p}),(u=o.trigger)==null||u.call(o,"responsiveStateChange",{state:e,oldState:t,target:C})}finally{o._responsiveUpdating=!1,F&&o.resumeStateful()}}get responsiveTarget(){return this.responsiveWidget||this._responsiveTarget}updateResponsiveTarget(){this.syncResponsiveWidget()}updateResponsiveWidget(e){var t;const r=this,n=e&&r.responsiveUpdate;(t=r.$responsiveWrapper)==null||t.destroy(),r.$responsiveWrapper=e&&Y(e,n),n==null||n.now()}responsiveUpdate(){const e=this,{$responsiveStates:t,$responsiveWrapper:r}=e,n=r==null?void 0:r.widget;if(t&&r){let i=null,l=0,u=t,o,c;n&&n!==e&&!e.$responsiveWhen&&(n.getConfig("responsive"),u=n.$responsiveStates||u),r.reset();for(c in t)c!=="*"&&(o=u[c].when(r.object,U),o!=null&&o!==!1&&(!i||o<l)&&(i=c,l=o));++e.responsiveUpdateCount,e.responsiveState=i}}syncResponsiveWidget(){var e;const t=this;let r=null,n;if(!t.isDestroying&&t.responsive){if(n=t.responsiveTarget,!(r=n))r=!t.responsiveRoot&&((e=t.up)==null?void 0:e.call(t,A))||t;else if(typeof n=="string"&&(r=n==="@"?t:n[0]==="@"?t[n.substring(1)]:t.up(n),!r))throw new Error(`No match for responsiveTarget="${n}"`);if(!r.isWidget)throw new Error(`${r.constructor.$$name} is not a widget and cannot be a responsiveTarget`)}return t.responsiveWidget=r,r}changeBreakpoints(e){return m.assertObject(e,"breakpoints"),e!=null&&e.width&&Object.keys(e.width).forEach(t=>{e.width[t].maxWidth=t}),e!=null&&e.height&&Object.keys(e.height).forEach(t=>{e.height[t].maxHeight=t}),e}updateBreakpoints(e){e&&(this.monitorResize=!0)}getBreakpoint(e,t){const r=Object.keys(e).map(i=>parseInt(i)).sort(),n=r.find(i=>t<=i);return e[n!=null?n:e["*"]&&"*"]}activateBreakpoint(e,t){var r,n;const i=this,l=i[`current${e}Breakpoint`];t!==l&&(i[`current${e}Breakpoint`]=t,i.setConfig(t.configs),l&&i.element.classList.remove(`b-breakpoint-${l.name.toLowerCase()}`),i.element.classList.add(`b-breakpoint-${t.name.toLowerCase()}`),i.trigger(`responsive${e}Change`,{breakpoint:t,prevBreakpoint:l}),(r=t.callback)==null||r.call(t,{source:i,breakpoint:t,prevBreakpoint:l}),(n=i.recompose)==null||n.call(i))}applyResponsiveBreakpoints(e,t){var r;const n=this,{width:i,height:l}=(r=n.breakpoints)!=null?r:{};if(i){const u=n.getBreakpoint(i,e);n.activateBreakpoint("Width",u)}if(l){const u=n.getBreakpoint(l,t);n.activateBreakpoint("Height",u)}}onInternalResize(e,t,r,n,i){super.onInternalResize(e,t,r,n,i),this.applyResponsiveBreakpoints(t,r)}},v(a,"$name","Responsive"),v(a,"configurable",{responsive:{$config:{lazy:"paint"},value:null},responsiveDefaults:{small:{when:400},medium:{when:800},large:{when:()=>1/0},"*":{}},responsiveRoot:null,responsiveState:null,responsiveTarget:{value:null,$config:{lazy:"paint"}},responsiveWidget:{value:null,$config:{nullify:!0}},breakpoints:null}),v(a,"delayable",{responsiveUpdate:"raf"}),v(a,"fenced",{syncResponsiveWidget:!0}),v(a,"prototypeProperties",{responsiveStateChanges:0,responsiveUpdateCount:0}),a};export{z as Featureable_default,k as Fencible_default,y as FilterField,q as Responsive_default};
//# sourceMappingURL=chunk-XMY3DSSV.js.map
