/*!
 *
 * Bryntum TaskBoard 5.6.2
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
import{ArrayHelper as R,Base as B,BrowserHelper as oe,Combo as tt,Container as pe,DateHelper as c,DayTime as it,Delayable_default as rt,DomClassList as ue,DomHelper as g,Duration as X,EventHelper as x,Events_default as ce,Field as at,GlobalEvents_default as Pe,LocaleManager_default as _e,Mask as nt,ObjectHelper as O,Panel as ye,PickerField as Le,Point as Oe,Popup as st,Rectangle as F,Rotatable_default as lt,StringHelper as de,TextField as Ye,TimeZoneHelper as ot,Tooltip as ut,VersionHelper as be,Widget as E,__publicField as m}from"./chunk-MZVS5JQA.js";var ct=t=>class extends(t||B){static get $name(){return"DragHelperContainer"}initContainerDrag(){const i=this;if(i.mode||(i.mode="container"),i.mode==="container"&&!i.containers)throw new Error("Container drag mode must specify containers")}grabContainerDrag(i){const r=this;if(!r.ignoreSelector||!i.target.closest(r.ignoreSelector)){const a=g.getAncestor(i.target,r.containers,r.outerElement);if(a){const n=a.getBoundingClientRect();r.context={element:a,valid:!0,action:"container",offsetX:i.pageX-n.left,offsetY:i.pageY-n.top,originalPosition:{parent:a.parentElement,prev:a.previousElementSibling,next:a.nextElementSibling}}}return!0}return!1}startContainerDrag(i){var r;const a=this,{context:n,floatRootOwner:l}=a,{element:s}=n,o=s.cloneNode(!0),u=l==null?void 0:l.element.closest(".b-outer");o.classList.add(a.dragProxyCls,a.draggingCls),((l==null?void 0:l.floatRoot)||g.getRootElement(s)).appendChild(o),n.dragProxy=o,n.dragging=s,s.classList.add(a.dropPlaceholderCls),(r=u==null?void 0:u.parentElement)!=null&&r.matches(".b-float-root")&&(o.style.zIndex=l.floatRootMaxZIndex+1)}onContainerDragStarted(i){const r=this,{context:a}=r,{element:n,dragProxy:l}=a,s=n.getBoundingClientRect();if(r.autoSizeClonedTarget)l.style.width=s.width+"px",l.style.height=s.height+"px",g.setTranslateXY(a.dragProxy,s.left,s.top);else{const o=l.getBoundingClientRect();Object.assign(a,{offsetX:o.width/2,offsetY:o.height/2}),g.setTranslateXY(l,i.clientX,i.clientY)}}updateContainerDrag(i){var r;const a=this,{context:n}=a;if(!n.started||!n.targetElement)return;const l=g.getAncestor(n.targetElement,a.containers,"b-gridbase"),s=(r=n.dragging)==null?void 0:r.contains(g.getActiveElement(n.dragging));l&&g.isDescendant(n.element,l)||(s&&Pe.suspendFocusEvents(),l&&n.valid?a.moveNextTo(l,i):a.revertPosition(),s&&Pe.resumeFocusEvents(),i.preventDefault())}finishContainerDrag(i){const r=this,{context:a}=r,{dragging:n,dragProxy:l,valid:s,draggedTo:o,insertBefore:u,originalPosition:d}=a;n&&(a.valid=!!(s&&(o||r.externalDropTargetSelector&&i.target.closest(r.externalDropTargetSelector))&&(n!==u||d.parent!==o)),a.finalize=(y=a.valid)=>{!y&&r.context&&r.revertPosition(),n.classList.remove(r.dropPlaceholderCls),l.remove(),r.reset()},a.async=!1,r.trigger("drop",{context:a,event:i}),a.async||a.finalize())}abortContainerDrag(i=!1,r=null,a=!1){const n=this,{context:l}=n;l.dragging&&(l.dragging.classList.remove(n.dropPlaceholderCls),l.dragProxy.remove(),n.revertPosition()),a||n.trigger(i?"drop":"abort",{context:l,event:r}),n.reset()}updateContainerProxy(i){const r=this,{context:a}=r,n=a.dragProxy;let l=i.pageX-a.offsetX,s=i.pageY-a.offsetY;typeof r.minX=="number"&&(l=Math.max(r.minX,l)),typeof r.maxX=="number"&&(l=Math.min(r.maxX-n.offsetWidth,l)),typeof r.minY=="number"&&(s=Math.max(r.minY,s)),typeof r.maxY=="number"&&(s=Math.min(r.maxY-n.offsetHeight,s)),r.lockX?g.setTranslateY(n,s):r.lockY?g.setTranslateX(n,l):g.setTranslateXY(n,l,s);let o;if(i.type==="touchmove"){const u=i.changedTouches[0];o=g.elementFromPoint(u.clientX,u.clientY)}else o=i.target;a.targetElement=o}moveNextTo(i,r){const{context:a}=this,n=a.dragging,l=i.parentElement;if(i!==n){const s=F.from(i).center.x;this.isRTL&&r.pageX>s||!this.isRTL&&r.pageX<s?(l.insertBefore(n,i),a.insertBefore=i):i.nextElementSibling?i.nextElementSibling!==n?(a.insertBefore=i.nextElementSibling,l.insertBefore(n,i.nextElementSibling)):!a.insertBefore&&n.parentElement.lastElementChild!==n&&(a.insertBefore=i.nextElementSibling):(l.appendChild(n),a.insertBefore=null),a.draggedTo=l}}revertPosition(){const{context:i}=this,{dragging:r}=i,{parent:a,next:n}=i.originalPosition;n?n.previousSibling===r||!n&&r===a.lastChild||a.insertBefore(r,n):a.appendChild(r),i.draggedTo=null}},dt={pageXOffset:0,pageYOffset:0},gt=t=>class extends rt(t||B){static get $name(){return"DragHelperTranslate"}static get configurable(){return{positioning:null,skipUpdatingElement:null}}initTranslateDrag(){const i=this;!i.isElementDraggable&&i.targetSelector&&(i.isElementDraggable=r=>r.closest(i.targetSelector))}grabTranslateDrag(i){const r=this.getTarget(i);return r?(this.context={valid:!0,element:r,startPageX:i.pageX,startPageY:i.pageY,startClientX:i.clientX,startClientY:i.clientY},!0):!1}getTarget(i){return i.target.closest(this.targetSelector)}getX(i){return this.positioning==="absolute"?parseFloat(i.style.left,10):g.getTranslateX(i)}getY(i){return this.positioning==="absolute"?parseFloat(i.style.top,10):g.getTranslateY(i)}getXY(i){return this.positioning==="absolute"?[i.offsetLeft,i.offsetTop]:g.getTranslateXY(i)}setXY(i,r,a){this.skipUpdatingElement||(this.positioning==="absolute"?(i.style.left=r+"px",i.style.top=a+"px"):g.setTranslateXY(i,r,a))}startTranslateDrag(i){const r=this,{context:a,outerElement:n,proxySelector:l}=r,s=r.dragWithin=r.dragWithin||r.cloneTarget&&document.body;let o=a.dragProxy||a.element;const u=o,d=o.parentElement;if(r.cloneTarget){const y=l?o.querySelector(l):o,{width:p,height:f,x:v,y:b}=F.from(y,F.outer(s));o=r.createProxy(o);let C=v,k=b;if(r.autoSizeClonedTarget&&(o.style.width=`${p}px`,o.style.height=`${f}px`),o.classList.add(r.dragProxyCls,r.draggingCls),o.classList.remove("b-hover","b-selected","b-focused"),s.appendChild(o),!r.autoSizeClonedTarget||l){const w=o.getBoundingClientRect(),{x:_,y:S}=s.getBoundingClientRect(),D=i.clientX-_,T=i.clientY-S+(s!==document.body?document.body.getBoundingClientRect().y:0);C=D-w.width/2,k=T-w.height/2,a.startPageX=i.pageX,a.startPageY=i.pageY}r.setXY(o,C,k),u.classList.add("b-drag-original"),r.hideOriginalElement&&u.classList.add("b-hidden")}o.classList.add(r.draggingCls),Object.assign(a,{element:o,grabbed:u,grabbedParent:d,grabbedNextSibling:o.nextElementSibling,elementStartX:r.getX(o),elementStartY:r.getY(o),elementX:g.getOffsetX(o,s||n),elementY:g.getOffsetY(o,s||n),scrollX:0,scrollY:0,scrollManagerElementContainsDragProxy:!r.cloneTarget||s===n}),s&&(a.parentElement=o.parentElement,s!==o.parentElement&&s.appendChild(o),r.updateTranslateProxy(i))}onTranslateDragStarted(){const i=this,{context:r}=i;let{relatedElements:a}=r;if(i.unifiedProxy&&r.element.classList.add("b-drag-main","b-drag-unified-proxy"),(a==null?void 0:a.length)>0){r.relatedElStartPos=[],r.relatedElDragFromPos=[];const{proxySelector:n}=i;let[l,s]=[r.elementStartX,r.elementStartY];r.originalRelatedElements=a,a=r.relatedElements=a.map((o,u)=>{const d=n?o.querySelector(n):o,{x:y,y:p,width:f,height:v}=F.from(d,i.dragWithin),b=i.cloneTarget?i.createProxy(o):o;return b.classList.add(i.draggingCls),b.classList.remove("b-hover","b-selected","b-focused"),i.cloneTarget&&(i.setXY(b,y,p),i.dragWithin.appendChild(b),b.classList.add(i.dragProxyCls),i.autoSizeClonedTarget&&(b.style.width=`${f}px`,b.style.height=`${v}px`),i.hideOriginalElement&&o.classList.add("b-hidden"),o.classList.add("b-drag-original")),r.relatedElStartPos[u]=r.relatedElDragFromPos[u]=i.getXY(b),i.unifiedProxy&&(b.classList.add("b-drag-unified-animation","b-drag-unified-proxy"),l+=i.unifiedOffset,s+=i.unifiedOffset,i.setXY(b,l,s),r.relatedElDragFromPos[u]=[l,s],b.style.zIndex=100-u),b}),i.unifiedProxy&&a&&a.length>0&&x.onTransitionEnd({element:a[0],property:"transform",handler(){a.forEach(o=>o.classList.remove("b-drag-unified-animation"))},thisObj:i,once:!0})}}applyConstraints(i,r,a){const n=this,{constrain:l,dragWithin:s}=n,{pageXOffset:o,pageYOffset:u}=s===document.body?globalThis:dt;return s&&l&&(r<0&&(r=0),r+i.offsetWidth>s.scrollWidth&&(r=s.scrollWidth-i.offsetWidth),a<0&&(a=0),a+i.offsetHeight>s.scrollHeight&&(a=s.scrollHeight-i.offsetHeight)),typeof n.minX=="number"&&(r=Math.max(n.minX+o,r)),typeof n.maxX=="number"&&(r=Math.min(n.maxX+o,r)),typeof n.minY=="number"&&(a=Math.max(n.minY+u,a)),typeof n.maxY=="number"&&(a=Math.min(n.maxY+u,a)),{constrainedX:r,constrainedY:a}}updateTranslateProxy(i,r){const a=this,{lockX:n,lockY:l,context:s}=a,o=s.dragProxy||s.element,{relatedElements:u,relatedElDragFromPos:d}=s;s.scrollManagerElementContainsDragProxy&&r&&(s.scrollX=r.getRelativeLeftScroll(o),s.scrollY=r.getRelativeTopScroll(o)),s.pageX=i.pageX,s.pageY=i.pageY,s.clientX=i.clientX,s.clientY=i.clientY;let y=s.elementStartX+i.pageX-s.startPageX+s.scrollX,p=s.elementStartY+i.pageY-s.startPageY+s.scrollY;if(a.snapCoordinates){const b=a.snapCoordinates({element:o,newX:y,newY:p});y=b.x,p=b.y}const{constrainedX:f,constrainedY:v}=a.applyConstraints(o,y,p);if((s.started||f!==y||v!==p)&&a.setXY(o,n?void 0:f,l?void 0:v),u){const b=n?0:f-s.elementStartX,C=l?0:v-s.elementStartY;u.forEach((k,w)=>{const[_,S]=d[w];a.setXY(k,_+b,S+C)})}s.newX=f,s.newY=v}async finishTranslateDrag(i){const r=this,a=r.context,{target:n}=i,l=!r.lockX&&Math.round(a.newX)!==Math.round(a.elementStartX),s=!r.lockY&&Math.round(a.newY)!==Math.round(a.elementStartY),o=a.dragProxy||a.element,{relatedElements:u}=a;if(!r.ignoreSamePositionDrop||l||s)if(a.valid===!1)await r.abortTranslateDrag(!0,i);else{const d=!r.allowDropOutside&&F.from(r.dragWithin||r.outerElement);d&&(typeof r.minX!="number"&&r.minX!==!0&&i.pageX<d.left||typeof r.maxX!="number"&&r.maxX!==!0&&i.pageX>d.right||typeof r.minY!="number"&&r.minY!==!0&&i.pageY<d.top||typeof r.maxY!="number"&&r.maxY!==!0&&i.pageY>d.bottom)?await r.abortTranslateDrag(!0,i):(a.finalize=async(y=a.valid)=>{if(a.finalized){console.warn("DragHelper: Finalizing already finalized drag");return}a.finalized=!0,!y&&r.context&&await r.abortTranslateDrag(!0,null,!0),r.isDestroyed||(r.trigger("dropFinalized",{context:a,event:i,target:n}),r.reset()),!r.cloneTarget&&o.parentElement!==a.grabbedParent&&[o,...u||[]].forEach(p=>p.style.transform="")},a.async=!1,await r.trigger("drop",{context:a,event:i,target:n}),a.async||await a.finalize())}else r.abortTranslateDrag(!1,i)}async abortTranslateDrag(i=!1,r=null,a=!1){var n,l;const s=this,{cloneTarget:o,context:u,proxySelector:d,dragWithin:y,draggingCls:p}=s,{relatedElements:f,relatedElStartPos:v,grabbed:b}=u,C=u.dragProxy||u.element;if(u.valid=!1,(n=s.scrollManager)==null||n.stopMonitoring(),u.aborted){console.warn("DragHelper: Aborting already aborted drag");return}let{elementStartX:k,elementStartY:w}=u;const _=k!==s.getX(C)||w!==s.getY(C);if(C&&u.started){if(!o&&y&&y!==u.grabbedParent&&u.grabbedParent.insertBefore(C,u.grabbedNextSibling),o&&d){const S=b.querySelector(d)||b,{x:D,y:T}=F.from(S);k=D,w=T}C.classList.add("b-aborting"),s.setXY(C,k,w),f==null||f.forEach((S,D)=>{S.classList.remove(p),S.classList.add("b-aborting"),s.setXY(S,v[D][0],v[D][1])}),a||s.trigger(i?"drop":"abort",{context:u,event:r}),C.isConnected&&!s.isDestroying&&_&&await x.waitForTransitionEnd({element:C,property:g.getPropertyTransitionDuration(C,"transform")?"transform":"all",thisObj:s,once:!0,runOnDestroy:!0}),s.isDestroyed||s.trigger("abortFinalized",{context:u,event:r})}(l=s.context)!=null&&l.started&&s.reset()}cleanUp(){const i=this,{context:r,cloneTarget:a,draggingCls:n,dragProxyCls:l}=i,s=r.dragProxy||r.element,{relatedElements:o,originalRelatedElements:u,grabbed:d}=r,y=a&&(i.removeProxyAfterDrop||!r.valid),p=[n,"b-aborting",l,"b-drag-main","b-drag-unified-proxy"];s.classList.remove(...p),y&&s.remove(),o==null||o.forEach(f=>{y?f.remove():f.classList.remove(...p)}),d.classList.remove("b-drag-original","b-hidden"),u==null||u.forEach(f=>f.classList.remove("b-hidden","b-drag-original"))}},j={move:"onMouseMove",up:"onMouseUp",docclick:"onDocumentClick",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",keydown:"onKeyDown"},Ae=class extends B.mixin(ce,ct,gt){static get defaultConfig(){return{dragProxyCls:"b-drag-proxy",invalidCls:"b-drag-invalid",draggingCls:"b-dragging",dropPlaceholderCls:"b-drop-placeholder",dragThreshold:5,outerElement:document.body,dragWithin:null,unifiedProxy:null,monitoringConfig:null,constrain:!0,minX:null,maxX:null,minY:null,maxY:null,mode:"translateXY",isElementDraggable:null,targetSelector:null,dropTargetSelector:null,dropTargetCls:null,proxySelector:null,cloneTarget:!1,autoSizeClonedTarget:!0,hideOriginalElement:!1,containers:null,ignoreSelector:null,startEvent:null,lockX:!1,lockY:!1,touchStartDelay:300,scrollManager:null,snapCoordinates:null,unifiedOffset:5,removeProxyAfterDrop:!0,clickSwallowDuration:50,ignoreSamePositionDrop:!0,allowDropOutside:null,floatRootOwner:null,mouseMoveListenerElement:document,externalDropTargetSelector:null,testConfig:{transitionDuration:10,clickSwallowDuration:50,touchStartDelay:100},rtlSource:null,createProxy:null}}construct(t){const e=this;super.construct(t),e.initListeners(),e.isContainerDrag?e.initContainerDrag():e.initTranslateDrag(),e.onScrollManagerScrollCallback=e.onScrollManagerScrollCallback.bind(e)}doDestroy(){this.reset(!0),super.doDestroy()}initListeners(){const t=this,{outerElement:e}=t,i={element:e,pointerdown:"onPointerDown",thisObj:t};t.mouseMoveListenerElement=t.getMouseMoveListenerTarget(e),x.on(i)}getMouseMoveListenerTarget(t){const e=t.getRootNode();let i=this.mouseMoveListenerElement;return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.mode==="closed"&&(i=t.closest(".b-outer")||i),i}get isRTL(){var t;return!!((t=this.rtlSource)!=null&&t.rtl)}onPointerDown(t){const e=this;if(t.button!==0||e.context||e.isElementDraggable&&!e.isElementDraggable(t.target,t))return;if(e.startEvent=t,e.isContainerDrag?e.grabContainerDrag(t):e.grabTranslateDrag(t)){e.blurDetacher=x.on({element:globalThis,blur:e.onWindowBlur,thisObj:e});const r={element:e.mouseMoveListenerElement,thisObj:e,capture:!0,keydown:j.keydown};if(t.pointerType==="touch"?(e.touchStartTimer=e.setTimeout(()=>e.touchStartTimer=null,e.touchStartDelay,"touchStartDelay"),r.touchmove={handler:j.touchmove,passive:!1},r.touchend=r.pointerup=j.touchend):(r.pointermove=j.move,r.pointerup=j.up),e.dragListenersDetacher=x.on(r),e.dragWithin&&e.dragWithin!==e.outerElement&&e.outerElement.contains(e.dragWithin)){const a=F.from(e.dragWithin,e.outerElement);e.minY=a.top,e.maxY=a.bottom,e.minX=a.left,e.maxX=a.right}}}async internalMove(t){var e,i;if(t.scrollInitiated)return;const r=this,{context:a}=r,n=x.getDistanceBetween(r.startEvent,t);if(r.touchStartTimer&&n>r.dragThreshold){r.abort(!0);return}if(!r.touchStartTimer&&(a!=null&&a.element)&&(a.started||n>=r.dragThreshold)&&((e=t.target)==null?void 0:e.nodeType)===Node.ELEMENT_NODE){if(!a.started){if(r.trigger("beforeDragStart",{context:a,event:t})===!1)return r.abort();r.isContainerDrag?r.startContainerDrag(t):r.startTranslateDrag(t),a.started=!0,(i=r.scrollManager)==null||i.startMonitoring(O.merge({scrollables:[{element:r.dragWithin||r.outerElement}],callback:r.onScrollManagerScrollCallback},r.monitoringConfig)),a.outermostEl=g.getOutermostElement(t.target),a.outermostEl.classList.add("b-draghelper-active"),r.dropTargetSelector&&r.dropTargetCls&&g.getRootElement(r.outerElement).querySelectorAll(r.dropTargetSelector).forEach(o=>o.classList.add(r.dropTargetCls));const s=r.trigger("dragStart",{context:a,event:t});O.isPromise(s)&&await s,a.moveUnblocked=!0,r.isContainerDrag?r.onContainerDragStarted(t):r.onTranslateDragStarted(t),r.trigger("afterDragStart",{context:a,event:t})}a.moveUnblocked?r._cachedMouseEvent?(r.update(t),r.update(r._cachedMouseEvent),delete r._cachedMouseEvent):r.update(t):r._cachedMouseEvent=t,t.type==="touchmove"&&(t.preventDefault(),t.stopImmediatePropagation())}}onScrollManagerScrollCallback(t){var e;const{lastMouseMoveEvent:i}=this;(e=this.context)!=null&&e.element&&i&&(i.isScroll=!0,this.update(i,t))}onTouchMove(t){this.internalMove(t)}onMouseMove(t){this.internalMove(t)}update(t,e){const i=this,{context:r}=i,a=document.scrollingElement||document.body;let n=i.getMouseMoveEventTarget(t);if(t.type==="touchmove"){const s=t.changedTouches[0];n=g.elementFromPoint(s.clientX+a.scrollLeft,s.clientY+a.scrollTop)}r.target=n;let l=i.allowDropOutside||!i.dragWithin||i.dragWithin.contains(t.target);l&&i.dropTargetSelector&&(l=l&&!!(n!=null&&n.closest(i.dropTargetSelector))),i.isContainerDrag?i.updateContainerProxy(t,e):i.updateTranslateProxy(t,e),r.valid=l,i.trigger("drag",{context:r,event:t}),i.isContainerDrag&&i.updateContainerDrag(t,e),r.valid=r.valid&&l;for(const s of i.draggedElements)s.classList.toggle(i.invalidCls,!r.valid);t&&(i.lastMouseMoveEvent=t)}get draggedElements(){var t;const{context:e}=this;return[e.dragProxy||e.element,...(t=e.relatedElements)!=null?t:[]]}async abort(t=!1){var e,i;const r=this,{context:a}=r;(i=(e=r.scrollManager)==null?void 0:e.stopMonitoring)==null||i.call(e),r.removeListeners(),a!=null&&a.started&&!a.aborted?(a.element.getBoundingClientRect(),a.valid=!1,r.isContainerDrag?r.abortContainerDrag(void 0,void 0,t):r.abortTranslateDrag(void 0,void 0,t),a.aborted=!0):r.reset(!0)}removeListeners(){var t,e;(t=this.dragListenersDetacher)==null||t.call(this),(e=this.blurDetacher)==null||e.call(this)}reset(t){const e=this,{context:i}=e;if(i!=null&&i.started){for(const r of e.draggedElements)r.classList.remove(e.invalidCls);i.outermostEl.classList.remove("b-draghelper-active"),e.isContainerDrag?i.dragProxy.remove():e.cleanUp(),e.dropTargetSelector&&e.dropTargetCls&&g.getRootElement(e.outerElement).querySelectorAll(e.dropTargetSelector).forEach(r=>r.classList.remove(e.dropTargetCls))}e.removeListeners(),t||e.trigger("reset"),e.context=e.lastMouseMoveEvent=null}onTouchEnd(t){this.onMouseUp(t)}onDocumentClick(t){t.stopPropagation()}onMouseUp(t){var e;const i=this,{context:r}=i;i.removeListeners(),r&&((e=i.scrollManager)==null||e.stopMonitoring(),r.started?r.moveUnblocked?(t.stopPropagation(),r.finalizing=!0,i.isContainerDrag?i.finishContainerDrag(t):i.finishTranslateDrag(t),x.on({element:document,thisObj:i,click:j.docclick,capture:!0,expires:i.clickSwallowDuration,once:!0})):i.ion({drag(){i.onMouseUp(t)},once:!0}):i.reset(!0))}onKeyDown(t){var e;(e=this.context)!=null&&e.started&&t.key==="Escape"&&(t.stopImmediatePropagation(),this.abort())}onWindowBlur(){this.context&&!this.context.finalizing&&this.abort()}createProxy(t){this.proxySelector&&(t=t.querySelector(this.proxySelector)||t);const e=t.cloneNode(!0);return e.removeAttribute("id"),e}get isContainerDrag(){return this.mode==="container"}async animateProxyTo(t,e={align:"c-c"}){const{context:i,draggedElements:r}=this,{element:a}=i,n=t.isRectangle?t:F.from(t);r.forEach(l=>{l.classList.add("b-drag-final-transition"),g.alignTo(l,n,e)}),await x.waitForTransitionEnd({element:a,property:"all",thisObj:this,once:!0}),r.forEach(l=>l.classList.remove("b-drag-final-transition"))}get isDragging(){var t;return!!((t=this.context)!=null&&t.started)}getMouseMoveEventTarget(t){return t.isScroll?g.elementFromPoint(t.clientX,t.clientY):t.target}};Ae._$name="DragHelper";var I={down:"onMouseDown",move:"onMouseMove",up:"onMouseUp",docclick:"onDocumentClick",touchstart:{handler:"onTouchStart",passive:!1},touchmove:"onTouchMove",touchend:"onTouchEnd",keydown:"onKeyDown"},ve=class extends ce(B){static get defaultConfig(){return{resizingCls:"b-resizing",dragThreshold:5,handleSize:10,dynamicHandleSize:null,reservedSpace:10,touchHandleSize:30,minWidth:1,maxWidth:0,minHeight:1,maxHeight:0,outerElement:document.body,scroller:null,allowResize:null,dragWithin:null,isElementResizable:null,targetSelector:null,leftHandle:!0,rightHandle:!0,topHandle:!0,bottomHandle:!0,handleSelector:null,handleContainerSelector:null,startEvent:null,grab:null,invalidCls:"b-resize-invalid",handleVisibilityThreshold:null,skipTranslate:!1,direction:"horizontal",clickSwallowDuration:50,rtlSource:null}}construct(t){const e=this;super.construct(t),!e.handleSelector&&!oe.isHoverableDevice&&(e.handleSize=e.touchHandleSize),e.handleVisibilityThreshold=e.handleVisibilityThreshold||2*e.handleSize,e.initListeners(),e.initResize()}doDestroy(){this.abort(!0),super.doDestroy()}updateSkipUpdatingElement(t){t&&(this.skipTranslate=!0)}initResize(){const t=this;if(!t.isElementResizable&&t.targetSelector&&(t.isElementResizable=e=>e.closest(t.targetSelector)),t.grab){const{edge:e,element:i,event:r}=t.grab;t.startEvent=r;const a=t.getCursorOffsetToElementEdge(r,i,e);t.context={element:i,edge:e,valid:!0,async:!1,elementStartX:g.getTranslateX(i)||i.offsetLeft,elementStartY:g.getTranslateY(i)||i.offsetTop,newX:g.getTranslateX(i)||i.offsetLeft,newY:g.getTranslateY(i)||i.offsetTop,elementWidth:i.offsetWidth,elementHeight:i.offsetHeight,cursorOffset:a,startX:r.clientX+a.x+t.scrollLeft,startY:r.clientY+a.y+t.scrollTop,finalize:()=>{var n;return(n=t.reset)==null?void 0:n.call(t)}},i.classList.add(t.resizingCls),t.internalStartResize(t.isTouch)}}initListeners(){const t=this,e={element:t.outerElement,mousedown:I.down,touchstart:I.touchstart,thisObj:t};!t.handleSelector&&oe.isHoverableDevice&&(e.mousemove={handler:I.move,delegate:t.targetSelector},e.mouseleave={handler:"onMouseLeaveTarget",delegate:t.targetSelector,capture:!0}),x.on(e)}get isRTL(){var t;return!!((t=this.rtlSource)!=null&&t.rtl)}get scrollLeft(){return this.scroller?this.scroller.x:this.outerElement.scrollLeft}get scrollTop(){return this.scroller?this.scroller.y:this.outerElement.scrollTop}internalStartResize(t){var e;const i={element:document,keydown:I.keydown,thisObj:this};t?(i.touchmove=I.touchmove,i.touchend=i.pointerup=I.touchend):(i.mousemove=I.move,i.mouseup=I.up),this.removeDragListeners=x.on(i),(e=this.onResizeHandlePointerDown)==null||e.call(this,this.startEvent)}removeDragListeners(){}reset(){var t;(t=this.removeDragListeners)==null||t.call(this),this.context=null,this.trigger("reset")}canResize(t,e){return!this.isElementResizable||this.isElementResizable(t,e)}onPointerDown(t,e){const i=this;i.startEvent=e,i.canResize(e.target,e)&&i.grabResizeHandle(t,e)&&(e.stopImmediatePropagation(),e.type==="touchstart"&&e.preventDefault(),i.internalStartResize(t))}onTouchStart(t){t.touches.length>1||this.onPointerDown(!0,t)}onMouseDown(t){t.button===0&&this.onPointerDown(!1,t)}internalMove(t,e){var i;const r=this,{context:a,direction:n}=r;a!=null&&a.element&&(a.started||x.getDistanceBetween(r.startEvent,e)>=r.dragThreshold)?(a.started||((i=r.scrollManager)==null||i.startMonitoring(O.merge({scrollables:[{element:r.dragWithin||r.outerElement,direction:n}],callback:l=>{var s;return((s=r.context)==null?void 0:s.element)&&r.lastMouseMoveEvent&&r.update(r.lastMouseMoveEvent,l)}},r.monitoringConfig)),r.trigger("resizeStart",{context:a,event:e}),a.started=!0),r.update(e)):!t&&!r.handleSelector&&r.checkResizeHandles(e)}onTouchMove(t){this.internalMove(!0,t)}onMouseMove(t){this.internalMove(!1,t)}onPointerUp(t,e){var i,r,a;const n=this,l=n.context;(i=n.removeDragListeners)==null||i.call(n),l?((r=n.scrollManager)==null||r.stopMonitoring(),l.started&&x.on({element:document,thisObj:n,click:I.docclick,expires:n.clickSwallowDuration,capture:!0,once:!0}),n.finishResize(e)):(a=n.reset)==null||a.call(n)}onTouchEnd(t){this.onPointerUp(!0,t)}onMouseUp(t){this.onPointerUp(!1,t)}onDocumentClick(t){t.stopPropagation()}onKeyDown(t){t.key==="Escape"&&this.abort()}update(t){const e=this,i=e.context,{element:r}=i,a=F.from(e.outerElement);i.currentX=Math.max(Math.min(t.clientX+i.cursorOffset.x,a.right),a.x)+e.scrollLeft,i.currentY=Math.max(Math.min(t.clientY+i.cursorOffset.y,a.bottom),a.y)+e.scrollTop,r.classList.add(e.resizingCls),t&&(e.updateResize(t)&&(e.trigger("resizing",{context:i,event:t}),r.classList.toggle(e.invalidCls,i.valid===!1)),e.lastMouseMoveEvent=t)}abort(t=!1){var e,i;const r=this;(i=(e=r.scrollManager)==null?void 0:e.stopMonitoring)==null||i.call(e),r.context?r.abortResize(null,t):r.isDestroyed||r.reset()}grabResizeHandle(t,e){var i;const r=this;if(r.allowResize&&!r.allowResize(e.target,e))return!1;const a=r.handleSelector,n=e.type==="touchstart"?e.changedTouches[0]:e,l=n.clientX,s=n.clientY;let o=r.targetSelector?e.target.closest(r.targetSelector):e.target;if(o){let u;if(a)if(e.target.matches(a))r.direction==="horizontal"?e.pageX<g.getPageX(o)+o.offsetWidth/2?u=r.isRTL?"right":"left":u=r.isRTL?"left":"right":e.pageY<g.getPageY(o)+o.offsetHeight/2?u="top":u="bottom";else return!1;else if(r.direction==="horizontal"?r.overLeftHandle(e,o)?u=r.isRTL?"right":"left":r.overRightHandle(e,o)&&(u=r.isRTL?"left":"right"):r.overTopHandle(e,o)?u="top":r.overBottomHandle(e,o)&&(u="bottom"),!u)return r.context=null,!1;e.type==="touchstart"&&e.preventDefault();const d=r.getCursorOffsetToElementEdge(n,o,u),y=(i=r.internalBeforeStart)==null?void 0:i.call(r,{element:o,edge:u});if(y&&(o=y.element,u=y.edge),r.trigger("beforeResizeStart",{element:o,event:e})!==!1)return r.context={element:o,edge:u,isTouch:t,valid:!0,async:!1,direction:r.direction,elementStartX:g.getTranslateX(o)||o.offsetLeft,elementStartY:g.getTranslateY(o)||o.offsetTop,newX:g.getTranslateX(o)||o.offsetLeft,newY:g.getTranslateY(o)||o.offsetTop,elementWidth:o.offsetWidth,elementHeight:o.offsetHeight,cursorOffset:d,startX:l+d.x+r.scrollLeft,startY:s+d.y+r.scrollTop,finalize:()=>{var p;return(p=r.reset)==null?void 0:p.call(r)}},o.classList.add(r.resizingCls),!0}return!1}getCursorOffsetToElementEdge(t,e,i){const r=F.from(e);let a=0,n=0;switch(i){case"left":a=r.x-(this.isRTL?r.width:0)-t.clientX;break;case"right":a=r.x+(this.isRTL?0:r.width)-t.clientX;break;case"top":n=r.y-t.clientY;break;case"bottom":n=r.y+r.height-t.clientY;break}return{x:a,y:n}}checkResizeHandles(t){const e=this,i=e.targetSelector?t.target.closest(e.targetSelector):t.target;if(i&&(!e.allowResize||e.allowResize(t.target,t))){if(e.currentElement=e.handleContainerSelector?t.target.closest(e.handleContainerSelector):t.target,e.currentElement){let r;e.direction==="horizontal"?r=e.overLeftHandle(t,i)||e.overRightHandle(t,i):r=e.overTopHandle(t,i)||e.overBottomHandle(t,i),r?e.highlightHandle():e.unHighlightHandle()}}else e.currentElement&&e.unHighlightHandle()}onMouseLeaveTarget(t){const e=this;e.currentElement=e.handleContainerSelector?t.target.closest(e.handleContainerSelector):t.target,e.currentElement&&e.unHighlightHandle()}updateResize(t){const e=this,{context:i,allowEdgeSwitch:r,skipTranslate:a,skipUpdatingElement:n}=e;let l;r&&(e.direction==="horizontal"?i.edge=i.currentX>i.startX?"right":"left":i.edge=i.currentY>i.startY?"bottom":"top");const{element:s,elementStartX:o,elementStartY:u,elementWidth:d,elementHeight:y,edge:p}=i,{style:f}=s,v=i.currentX-i.startX,b=i.currentY-i.startY,C=g.getExtremalSizePX(s,"minWidth")||e.minWidth,k=g.getExtremalSizePX(s,"maxWidth")||e.maxWidth,w=g.getExtremalSizePX(s,"minHeight")||e.minHeight,_=g.getExtremalSizePX(s,"maxHeight")||e.maxHeight,S=p==="right"&&!e.isRTL||p==="bottom"?1:-1,D=d+v*S,T=y+b*S;let M=Math.max(C,D),L=Math.max(w,T);if(k>0&&(M=Math.min(M,k)),_>0&&(L=Math.min(L,_)),f.flex&&(f.flex=""),e.direction==="horizontal"&&d!==M){if(n||(f.width=Math.abs(M)+"px"),i.newWidth=M,p==="left"||M<0){const Y=Math.max(Math.min(o+d-e.minWidth,o+v),0);a||g.setTranslateX(s,Math.round(Y)),i.newX=Y}else p==="right"&&r&&!a&&g.setTranslateX(s,o);l=!0}else e.direction==="vertical"&&y!==T&&(n||(f.height=Math.abs(L)+"px"),i.newHeight=L,p==="top"||L<0?(i.newY=Math.max(Math.min(u+y-e.minHeight,u+b),0),a||g.setTranslateY(s,i.newY)):p==="bottom"&&r&&!a&&g.setTranslateY(s,u),l=!0);return l}finishResize(t){var e;const i=this,r=i.context,a={context:r,event:t};if(r.element.classList.remove(i.resizingCls),r.started){let n=!1;i.direction==="horizontal"?n=r.newWidth&&r.newWidth!==r.elementWidth:n=r.newHeight&&r.newHeight!==r.elementHeight,i.trigger(n?"resize":"cancel",a),r.async||r.finalize()}else(e=i.reset)==null||e.call(i)}abortResize(t=null,e=!1){const i=this,r=i.context;r.element.classList.remove(i.resizingCls),i.direction==="horizontal"?((r.edge==="left"||r.allowEdgeSwitch&&!r.skipTranslate)&&g.setTranslateX(r.element,r.elementStartX),r.element.style.width=r.elementWidth+"px"):(g.setTranslateY(r.element,r.elementStartY),r.element.style.height=r.elementHeight+"px"),!e&&i.trigger("cancel",{context:r,event:t}),i.isDestroyed||i.reset()}highlightHandle(){const t=this,e=t.targetSelector?t.currentElement.closest(t.targetSelector):t.currentElement;t.currentElement.classList.add("b-resize-handle"),e.classList.add("b-over-resize-handle")}unHighlightHandle(){const t=this,e=t.targetSelector?t.currentElement.closest(t.targetSelector):t.currentElement;e&&e.classList.remove("b-over-resize-handle"),t.currentElement.classList.remove("b-resize-handle"),t.currentElement=null}overAnyHandle(t,e){return this.overStartHandle(t,e)||this.overEndHandle(t,e)}overStartHandle(t,e){return this.direction==="horizontal"?this.overLeftHandle(t,e):this.overTopHandle(t,e)}overEndHandle(t,e){return this.direction==="horizontal"?this.overRightHandle(t,e):this.overBottomHandle(t,e)}getDynamicHandleSize(t,e){const i=t?2:1,{handleSize:r}=this;return this.dynamicHandleSize&&r*i>e-this.reservedSpace?Math.max(Math.floor((e-this.reservedSpace)/i),0):r}overLeftHandle(t,e){const i=this,{offsetWidth:r}=e;if(i.leftHandle&&i.canResize(e,t)&&(r>=i.handleVisibilityThreshold||i.dynamicHandleSize)){const a=F.from(e);return a.width=i.getDynamicHandleSize(i.rightHandle,r),a.width>0&&a.contains(x.getPagePoint(t))}return!1}overRightHandle(t,e){const i=this,{offsetWidth:r}=e;if(i.rightHandle&&i.canResize(e,t)&&(r>=i.handleVisibilityThreshold||i.dynamicHandleSize)){const a=F.from(e);return a.x=a.right-i.getDynamicHandleSize(i.leftHandle,r),a.width>0&&a.contains(x.getPagePoint(t))}return!1}overTopHandle(t,e){const i=this,{offsetHeight:r}=e;if(i.topHandle&&i.canResize(e,t)&&(r>=i.handleVisibilityThreshold||i.dynamicHandleSize)){const a=F.from(e);return a.height=i.getDynamicHandleSize(i.bottomHandle,r),a.height>0&&a.contains(x.getPagePoint(t))}return!1}overBottomHandle(t,e){const i=this,{offsetHeight:r}=e;if(i.bottomHandle&&i.canResize(e,t)&&(r>=i.handleVisibilityThreshold||i.dynamicHandleSize)){const a=F.from(e);return a.y=a.bottom-i.getDynamicHandleSize(i.bottomHandle,r),a.height>0&&a.contains(x.getPagePoint(t))}return!1}};m(ve,"configurable",{skipUpdatingElement:null}),ve._$name="ResizeHelper";var De=class le extends E{static get configurable(){return{testConfig:{destroyTimeout:1,timeout:1e3},floating:!0,timeout:2500,autoDestroy:null,destroyTimeout:200,showProgress:!0,color:null,bottomMargin:20}}compose(){const{appendTo:e,color:i,html:r,showProgress:a,style:n,timeout:l}=this;return{parent:e||this.floatRoot,class:{...ue.normalize(i,"object"),"b-toast-hide":1},html:r,style:n,children:{progressElement:a&&{style:`animation-duration:${l/1e3}s;`,class:{"b-toast-progress":1}}},listeners:{click:"hide"}}}doDestroy(){this.untoast(),super.doDestroy()}get nextBottom(){const{bottomMargin:e,element:i}=this;return parseInt(i.style.bottom,10)+i.offsetHeight+e}async show(){var e,i;await super.show(...arguments);const r=this,{element:a}=r,{toasts:n}=le;n.includes(r)||(a.style.bottom=((i=(e=n[0])==null?void 0:e.nextBottom)!=null?i:r.bottomMargin)+"px",n.unshift(r),a.getBoundingClientRect(),a.classList.remove("b-toast-hide"),r.timeout>0&&(r.hideTimeout=r.setTimeout("hide",r.timeout)))}async hide(){const e=this;e.untoast(),e.element.classList.add("b-toast-hide"),e.autoDestroy&&!e.destroyTimer&&(e.destroyTimer=e.setTimeout("destroy",e.destroyTimeout))}untoast(){const{toasts:e}=le;e.includes(this)&&e.splice(e.indexOf(this),1)}static hideAll(){le.toasts.slice().reverse().forEach(e=>e.hide())}static show(e){const i=le.new({autoDestroy:!0,rootElement:document.body},typeof e=="string"?{html:e}:e);return i.show(),i}};m(De,"$name","Toast"),m(De,"type","toast");var ae=De;ae.toasts=[],ae.initClass(),ae._$name="Toast";var Ne=class{static getById(t){return E.getById(t)}static fromElement(t,e,i){return E.fromElement(t,e,i)}static createWidget(t={}){return t.isWidget?t:E.create(t)}static append(t,e){if(t=Array.isArray(t)&&t||[t],(e instanceof HTMLElement||typeof e=="string")&&(e={appendTo:e}),e.insertFirst){const i=typeof e.insertFirst=="string"?document.getElementById(e.insertFirst):e.insertFirst;i.firstChild?e.insertBefore=i.firstChild:e.appendTo=i}return t.map(i=>E.create(O.assign({},e||{},i)))}static openPopup(t,e){return E.create(O.assign({forElement:t},typeof e=="string"?{html:e}:e),"popup")}static showContextMenu(t,e){const i=this;return i.currentContextMenu&&i.currentContextMenu.destroy(),t instanceof HTMLElement?e.forElement=t:(e.forElement=document.body,Array.isArray(t)&&(t=new Oe(...t)),t instanceof Oe&&(e.align={position:t})),e.internalListeners={destroy:i.currentContextMenu=null},i.currentContextMenu=E.create(e,"menu")}static attachTooltip(t,e){return E.attachTooltip(t,e)}static hasTooltipAttached(t){return E.resolveType("tooltip").hasTooltipAttached(t)}static destroyTooltipAttached(t){return E.resolveType("tooltip").destroyTooltipAttached(t)}static mask(t,e="Loading"){if(t)return t instanceof HTMLElement&&(t={target:t,text:e}),nt.mask(t,t.target)}static unmask(t,e=!0){t.mask&&(e?t.mask.close():t.mask.hide())}static toast(t){return ae.show(t)}};Ne._$name="WidgetHelper";var Ie=Object.hasOwn||((t,e)=>Object.prototype.hasOwnProperty.call(t,e)),Ce=null;function ht(t,e){return Object.defineProperty(t,"parser",{value:e}),e}var mt=class{constructor(t){this.formatter=t}format(t){return this.formatter.defaultFormat(t)}parse(t,e){return this.formatter.defaultParse(t,e)}resolvedOptions(){return null}},ne=class{static get(t){if(t==null)return this.NULL;if(t instanceof this)return t;const e=typeof t=="string"?t:JSON.stringify(t),i=this.cache;let r=i.get(e);return r||(Ce=e,r=new this(t),i.set(e,r)),r}static get cache(){return Ie(this,"_cache")&&this._cache||(this._cache=new Map)}static get NULL(){return Ie(this,"_null")?this._null:this._null=new this(null)}constructor(t){const e=this,{standardOptions:i}=e.constructor;if(e.cacheKey=Ce,Ce=null,e.initialize(),t===null)e.formatter=new mt(e);else{e.configure(t);for(const[r,a]of Object.entries(e.resolvedOptions()))a!=null&&i.includes(r)&&(e[r]=a)}}get parser(){return ht(this,new this.constructor.Parser(this))}defaultFormat(t){return t==null?t:String(t)}defaultParse(t){return t}format(t){return t==null?t:this.formatter.format(t)}parse(t,e){return t==null?t:this.parser.parse(t,e)}parseStrict(t){return this.parse(t,!0)}resolvedOptions(){return this.formatter.resolvedOptions()}};m(ne,"standardOptions",Object.freeze([])),ne._$name="Formatter";var ge=de.escapeRegExp,Re=/[\d+-]/g,he=(t,e)=>new Intl.NumberFormat(t||void 0,e),ft=/^(?:([$])\s*)?(?:(\d+)>)?\d+(,\d+)?(?:\.((\d*)(?:#*)|[*]))?(?:\s*([%])?)?$/,pt="\u2212",yt=class{constructor(t){const e=this,i=t.locale,r=he(i,{maximumFractionDigits:3}),a=t.is.currency?e._decodeStyle(i,{style:"currency",currency:t.currency,currencyDisplay:t.currencyDisplay}):null,n=t.is.percent?e._decodeStyle(i,{style:"percent"}):null,l=r.format(1.2).replace(Re,"")[0],s=r.format(1e9).replace(Re,"")[0]||"";Object.assign(e,{currency:a,decimal:l,formatter:t,grouper:s,percent:n}),e.decimal=l,e.decimalRe=ge(l,"g"),e.grouper=s,e.stripRe=new RegExp(`(?:\\s+|${ge(s)})`+(a?`|(?:${ge(a.text)})`:"")+(n?`|(?:${ge(n.text)})`:""),"g")}decimalPlaces(t){t=t.replace(this.stripRe,"");const e=t.indexOf(this.decimal)+1;return e&&t.length-e}parse(t,e){return typeof t=="string"&&(t=t.replace(this.stripRe,"").replace(this.decimalRe,".").replace(pt,"-"),t=e?Number(t):parseFloat(t),this.formatter.is.percent&&(t/=100)),t}_decodeStyle(t,e){const i=he(t,e),r=he(t,Object.assign(i.resolvedOptions(),{style:"decimal"})),a=i.format(0),n=r.format(0);return{suffix:a.startsWith(n),text:a.replace(n,"").trim()}}},We=class qe extends ne{static get $name(){return"NumberFormat"}initialize(){this._as={},this.is={decimal:!1,currency:!1,percent:!1,null:!0,from:null}}get truncator(){const e=this.maximumFractionDigits,i=Math.min(20,e+1);return e==null?null:this.as({style:"decimal",maximumFractionDigits:i,minimumFractionDigits:i},"truncator")}configure(e){typeof e!="string"?Object.assign(this,e):this.template=e;const i=this,r={},a=i.locale?_e.locales[i.locale]:_e.locale,n=a==null?void 0:a.NumberFormat,{template:l}=i,{standardOptions:s}=i.constructor;if(n)for(const o in n)i[o]==null&&typeof n[o]!="function"&&(i[o]=n[o]);if(l){const o=ft.exec(l),u=o[2],d=o[4];i.useGrouping=!!o[3],i.style=o[1]?"currency":o[6]?"percent":"decimal",u&&(i.integer=+u),d==="*"?i.fraction=[0,20]:d!=null&&(i.fraction=[o[5].length,d.length])}i._minMax("fraction",!0,!0),i._minMax("integer",!0,!1),i._minMax("significant",!1,!0);for(const o of s)i[o]!=null&&(r[o]=i[o]);i.is.from=i.from&&i.from.is,i.is[i.style]=!(i.is.null=!1),i.formatter=he(i.locale,r)}as(e,i=null){const r=this.resolvedOptions()||{template:"9.*"},a=this._as;let n=i&&a[i];return n||(typeof e=="string"?r.style=e:Object.assign(r,e),r.from=this,n=new qe(r)),i&&(a[i]=n),n}defaultParse(e,i){return e==null?e:i?Number(e):parseFloat(e)}format(e){if(typeof e=="string"){const i=Number(e);e=isNaN(i)?this.parse(e):i}return super.format(e)}round(e){return this.parse(this.format(e))}truncate(e){const i=this,r=i.maximumFractionDigits,{truncator:a}=i;let n=i.parse(e),l;return a&&(n=a.format(n),l=n.indexOf(a.parser.decimal),l>-1&&n.length-l-1>r&&(n=n.slice(0,l+r+1)),n=a.parse(n)),n}resolvedOptions(){const e=super.resolvedOptions();for(const i in e)e[i]===void 0&&(e[i]=this[i]);return e}_minMax(e,i,r){const a=this,n=a[e];if(n!=null){const l=de.capitalize(e),s=`maximum${l}Digits`,o=`minimum${l}Digits`;typeof n=="number"?(i&&(a[o]=n),r&&(a[s]=n)):(a[o]=n[0],a[s]=n[1])}}};m(We,"standardOptions",["currency","currencyDisplay","locale","maximumFractionDigits","minimumFractionDigits","minimumIntegerDigits","maximumSignificantDigits","minimumSignificantDigits","style","useGrouping"]);var q=We;q.Parser=yt,Object.assign(q.prototype,{currency:null,currencyDisplay:"symbol",fraction:null,from:null,integer:null,locale:null,maximumFractionDigits:null,minimumFractionDigits:null,minimumIntegerDigits:null,maximumSignificantDigits:null,minimumSignificantDigits:null,significant:null,style:"decimal",template:null,useGrouping:!0}),ne.number=(t,e)=>q.get(t).format(e),q._$name="NumberFormat";var bt=class extends B.mixin(ce){constructor(){super(...arguments),m(this,"hasNativeAccess",!0),m(this,"_content",null)}async writeText(t,e){const i=this,{_content:r}=i;if(e&&i.hasNativeAccess)try{await navigator.clipboard.writeText(t)}catch(a){i.hasNativeAccess=!1}r!==t&&(i._content=t,i.triggerContentChange(r,!1,!0))}async readText(t){const e=this,{_content:i}=e;if(t&&e.hasNativeAccess)try{const r=await navigator.clipboard.readText();return i!==r&&(e._content=r,e.triggerContentChange(i,!0)),r}catch(r){e.hasNativeAccess=!1}return i}triggerPaste(t){this.trigger("paste",{source:t,text:this._content})}triggerContentChange(t,e=!1,i=!1){this.trigger("contentChange",{fromRead:e,fromWrite:i,oldText:t,newText:this._content})}async clear(t){await this.writeText("",t)}},vt=t=>{var e;return e=class extends(t||B){construct(...i){super.construct(...i),globalThis.bryntum.clipboard||(globalThis.bryntum.clipboard=new bt),globalThis.bryntum.clipboard.ion({paste:"onClipboardPaste",contentChange:"onClipboardContentChange",thisObj:this})}get clipboard(){return globalThis.bryntum.clipboard}onClipboardPaste({text:i,source:r}){var a;const n=this,{clipboardText:l,isCut:s}=n,o=n.compareClipboardText(l,i);o&&s?((a=n.handleCutData)==null||a.call(n,{text:i,source:r}),n.isCut=!1,n.cutData=null):o||n.clearClipboard(!1)}onClipboardContentChange({newText:i}){this.compareClipboardText(this.clipboardText,i)||this.clearClipboard(!1)}set cutData(i){var r,a;const n=this;(r=n._cutData)==null||r.forEach(l=>n.setIsCut(l,!1)),n._cutData=R.asArray(i),(a=n._cutData)==null||a.forEach(l=>n.setIsCut(l,!0))}get cutData(){return this._cutData}setIsCut(){}async writeToClipboard(i,r,a={}){if(await this.beforeCopy({data:i,isCut:r,...a})===!1)return;const n=this,l=typeof i=="string",s=l?i:n.stringConverter?n.stringConverter(i):de.safeJsonStringify(i);return n.clipboardText=s,await n.clipboard.writeText(s,n.useNativeClipboard),n.clipboardData=i,n.isCut=r,n.cutData=r&&!l?i:null,s}async readFromClipboard(i={},r=!1){var a;const n=this,{clipboard:l}=n,s=await l.readText(n.useNativeClipboard),{isOwn:o,data:u}=n.transformClipboardText(s),d=s&&o&&n.isCut;if(!(u==null||Array.isArray(u)&&u.length==0||await((a=n.beforePaste)==null?void 0:a.call(n,{data:u,text:s,...i,isCut:d}))===!1))return o||n.clearClipboard(!1),r||l.triggerPaste(n),u}async clearClipboard(i=!0){const r=this;r.clipboardData=r.clipboardText=r.cutData=null,r.isCut=!1,i&&await r.clipboard.clear(r.useNativeClipboard)}compareClipboardText(i,r){const a=/\r\n|(?!\r\n)[\n-\r\x85\u2028\u2029]/g;return(i==null?void 0:i.replace(a,`
`))===(r==null?void 0:r.replace(a,`
`))}transformClipboardText(i){const r=this,a=r.compareClipboardText(r.clipboardText,i),n=a?r.clipboardData:r.stringParser&&i?r.stringParser(i):i;return{isOwn:a,data:n}}hasClipboardData(){const{clipboard:i}=this,{_content:r}=i;if(!(this.useNativeClipboard&&i.hasNativeAccess))return!!(r&&this.transformClipboardText(r).data)}},m(e,"$name","Clipboardable"),m(e,"configurable",{useNativeClipboard:!1}),e},Dt={constructor:1,prototype:1,name:1,length:1,arguments:1,caller:1,callee:1,__proto__:1},Ve=class{static apply(t){if(!t.target)throw new Error("Override must specify what it overrides, using static getter target");if(!t.target.class)throw new Error("Override must specify which class it overrides, using target.class");if(!this.shouldApplyOverride(t))return!1;const e=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(t.prototype);return e.splice(e.indexOf("target"),1),this.internalOverrideAll(t.target.class,e,t),this.internalOverrideAll(t.target.class.prototype,i,t.prototype),!0}static internalOverrideAll(t,e,i){Reflect.ownKeys(i).forEach(r=>{if(e.includes(r)&&!Dt[r]){const a=Object.getOwnPropertyDescriptor(i,r);let n=t,l=null;for(;!l&&n;)l=Object.getOwnPropertyDescriptor(n,r),l||(n=Object.getPrototypeOf(n));l&&this.internalOverride(n,r,a,l)}})}static internalOverride(t,e,i,r){const a=t._overridden=t._overridden||{};a[e]=t[e],r.get?Object.defineProperty(t,e,{enumerable:!1,configurable:!0,get:i.get}):t[e]=i.value}static shouldApplyOverride(t){const e=t.target;if(!e.maxVersion&&!e.minVersion)return!0;if(!e.product)throw new Error("Override must specify product when using versioning");return!(e.maxVersion&&be[e.product].isNewerThan(e.maxVersion)||e.minVersion&&be[e.product].isOlderThan(e.minVersion))}};Ve._$name="Override";var He=class Ke extends ce(B){static get configurable(){return{date:{$config:{equal:"date"},value:c.clearTime(new Date)},month:null,year:null,weekStartDay:null,hideNonWorkingDays:null,nonWorkingDays:null,sixWeeks:null}}configure(e){super.configure(e),this.updateDayNumbers(),e.date&&(this.date=e.date),this.generation=0}changeDate(e){if(!this.isConfiguring){if(e=typeof e=="string"?c.parse(e,"YYYY-MM-DD"):new Date(e),isNaN(e))throw new Error("Month date ingestion must be passed a Date, or a valid YYYY-MM-DD date string");return e}}updateDate(e,i){const r=this,{dayColumnIndex:a,weekCount:n}=r,l=c.getFirstDateOfMonth(e),s=c.getLastDateOfMonth(l),o=a[l.getDay()],u=a[s.getDay()],d=!i||e.getFullYear()!==i.getFullYear(),y=!i||e.getMonth()!==i.getMonth(),p=r.eventListeners&&(i?e.getDate()!==i.getDate()|(r.getWeekId(e)!==r.getWeekId(i))<<1|y<<2|d<<3:15);if(r._year=e.getFullYear(),r._month=e.getMonth(),r.startDayOfMonth=1-o,r.endDayOfMonth=s.getDate()+(6-u),r.sixWeeks&&(r.endDayOfMonth+=(6-r.weekCount)*7),(!r.weekBase||d)&&r.calculateWeekBase(),(y||d)&&r.generation++,p){const f={newDate:e,oldDate:i,changes:{d:!0,w:!!(p&2),m:!!(p&12),y:!!(p&8),r:r.weekCount!==n}};r.trigger("dateChange",f),p&2&&r.trigger("weekChange",f),p&12&&r.trigger("monthChange",f),p&8&&r.trigger("yearChange",f)}}calculateWeekBase(){const e=this,{dayColumnIndex:i}=e,r=new Date(e.year,0,1),a=new Date(e.year,11,31),n=e.month?e.getOtherMonth(r):e;e.dayColumnIndex[r.getDay()]>3?e.weekBase=n.startDate:e.weekBase=new Date(e.year,0,n.startDayOfMonth-7);const l=Math.floor(c.diff(e.weekBase,a,"day")/7);e.has53weeks=l===53&&i[a.getDay()]>2}getWeekStart(e){if(typeof e=="number")return c.add(this.weekBase,Math.max(e,1)*7,"day");const i=this,[r,a]=e;return r===i.year?i.getWeekStart(a):i.getOtherMonth(new Date(r,0,1)).getWeekStart(a)}getOtherMonth(e){const i=this,r=i===ze?new Ke(null):ze;return r.configure({weekBase:null,weekStartDay:i.weekStartDay,nonWorkingDays:i.nonWorkingDays,hideNonWorkingDays:i.hideNonWorkingDays,sixWeeks:i.sixWeeks,date:new Date(e.getFullYear(),0,1)}),r.date=e,r.updateDate(r.date,r.date),r}changeYear(e){const i=new Date(this.date);i.setFullYear(e),this.date=i}changeMonth(e){const i=new Date(this.date);i.setMonth(e),this.date=i}get weekStartDay(){return typeof this._weekStartDay=="number"?this._weekStartDay:c.weekStartDay}updateWeekStartDay(){const e=this;e.updateDayNumbers(),!e.isConfiguring&&e.date&&(e.weekBase=null,e.updateDate(e.date,e.date))}get nonWorkingDays(){return this._nonWorkingDays||c.nonWorkingDays}changeNonWorkingDays(e){return O.assign({},e)}updateNonWorkingDays(){this.updateDayNumbers()}updateHideNonWorkingDays(){this.updateDayNumbers()}updateSixWeeks(){this.isConfiguring||this.updateDate(this.date,this.date)}get dayCount(){return this.endDayOfMonth+1-this.startDayOfMonth}get weekCount(){return this.dayCount/7}get startDate(){const e=this;if(e.year!=null&&e.month!=null&&e.startDayOfMonth!=null)return new Date(e.year,e.month,e.startDayOfMonth)}get endDate(){const e=this;if(e.year!=null&&e.month!=null&&e.startDayOfMonth!=null)return new Date(e.year,e.month,e.endDayOfMonth)}eachDay(e){for(let i=this.startDayOfMonth;i<=this.endDayOfMonth;i++)e(new Date(this.year,this.month,i))}eachWeek(e){const i=this,{weekCount:r}=i;for(let a=i.startDayOfMonth,n=0;n<r;n++){const l=[],s=i.getWeekNumber(new Date(i.year,i.month,a));for(let o=0;o<7;o++,a++)l.push(new Date(i.year,i.month,a));e(s,l)}}getWeekNumber(e){const i=this;if(e=c.clearTime(e),e.getFullYear()!==i.year)return i.getOtherMonth(new Date(e.getFullYear(),0,1)).getWeekNumber(e);let r=Math.floor(c.diff(i.weekBase,e,"day")/7),a=e.getFullYear();if(r)r===53&&!i.has53weeks?(r=1,a++):r>53&&(r=r%52);else return i.getOtherMonth(new Date(i.year-1,0,1)).getWeekNumber(new Date(i.year,0,0));return[a,r]}getWeekId(e){const i=this.getWeekNumber(e);return i[0]*100+i[1]}getCellData(e,i,r=it.MIDNIGHT){const a=this,n=e.getDay(),l=a.visibleDayColumnIndex[n],s=a.nonWorkingDays[n],o=a.hideNonWorkingDays&&s;return(e<a.startDate||e>a.endDate)&&(a.month=e.getMonth()),{day:n,dayTime:r,visibleColumnIndex:l,isNonWorking:s,week:a.getOtherMonth(e).getWeekNumber(e),key:c.format(e,"YYYY-MM-DD"),columnIndex:a.dayColumnIndex[n],date:new Date(e),dayEnd:r.duration("s"),tomorrow:r.dayOfDate(c.add(e,1,"day")),isOtherMonth:Math.sign(e.getMonth()+e.getFullYear()*12-(i.month+i.year*12)),visible:!o&&e>=i.startDate&&e<c.add(i.endDate,1,"day"),isRowStart:l===0,isRowEnd:l===a.visibleColumnCount-1}}updateDayNumbers(){const e=this,{weekStartDay:i,nonWorkingDays:r,hideNonWorkingDays:a}=e,n=e.dayColumnIndex=[],l=e.canonicalDayNumbers=[],s=e.visibleDayColumnIndex=[];let o=0;for(let u=0;u<7;u++){const d=(i+u)%7;l[u]=d,n[d]=u,(!a||!r[d])&&(s[d]=o++)}e.visibleColumnCount=o,e.weekLength=a?7-O.keys(r).length:7}};m(He,"$name","Month");var se=He,ze=new se(null);se._$name="Month";var me=class Ge extends pe.mixin(lt){onChildAdd(e){super.onChildAdd(e),e.ion({click:"resetValueCache",toggle:"onItemToggle",thisObj:this,prio:1e4})}onChildRemove(e){e.un({toggle:"resetValueCache",click:"resetValueCache",thisObj:this}),super.onChildRemove(e)}onItemToggle(e){const i=this;i.resetValueCache(),!i.isSettingValue&&(!i.toggleGroup||e.pressed)&&i.triggerFieldChange({value:i.value,userAction:!0,event:e})}resetValueCache(){this._value=null}createWidget(e){const i=this;return i.constructor.resolveType(e.type||"button").isButton&&(i.color&&!e.color&&(e.color=i.color),i.toggleGroup&&!e.toggleGroup&&(typeof i.toggleGroup=="boolean"&&(i.toggleGroup=Ge.generateId("toggleGroup")),e.toggleGroup=i.toggleGroup)),i.columns&&(e.width=`${100/i.columns}%`),e=super.createWidget(e),i.relayEvents(e,["click","action","toggle"]),e}updateRotate(e){this.eachWidget(i=>{i.rotate!==!1&&(i.rotate=e)})}get value(){if(!this._value){const e=[];this.items.forEach(i=>{i.pressed&&i.value!==void 0&&e.push(i.value)}),this._value=e.join(this.valueSeparator)}return this._value}set value(e){const i=this,r=i.value;Array.isArray(e)||(e==null?e=[]:typeof e=="string"?e=e.split(i.valueSeparator):e=[e]),i._value=e.join(i.valueSeparator),i.isSettingValue=!0,i.items.forEach(a=>{a.value!==void 0&&(a.pressed=e.includes(a.value))}),i.isSettingValue=!1,!i.isConfiguring&&r!==i.value&&i.triggerFieldChange({value:i.value,userAction:!1})}updateDisabled(e){this.items.forEach(i=>i.disabled=e||!i.ignoreParentReadOnly&&this.readOnly)}updateReadOnly(e){super.updateReadOnly(e),this.updateDisabled(this.disabled)}get widgetClassList(){const e=super.widgetClassList;return this.columns&&e.push("b-columned"),e}};m(me,"$name","ButtonGroup"),m(me,"type","buttongroup"),m(me,"configurable",{defaultType:"button",cls:null,items:null,color:null,toggleGroup:null,valueSeparator:",",columns:null,hideWhenEmpty:!0,defaultBindProperty:"value"});var ke=me;ke.initClass(),ke._$name="ButtonGroup";var W=class extends ye{static get configurable(){return{layout:"vbox",textContent:!1,date:{$config:{equal:"date"},value:null},month:{},year:null,weekStartDay:null,sixWeeks:!0,showWeekNumber:null,showWeekColumn:null,disabledDates:null,headerRenderer:null,weekRenderer:null,cellRenderer:null,disableWeekends:null,hideNonWorkingDays:null,hideNonWorkingDaysCls:"b-hide-nonworking-days",nonWorkingDays:null,tip:null,dayCellCls:"b-calendar-cell",dayHeaderCls:"b-calendar-day-header",disabledCls:"b-disabled-date",otherMonthCls:"b-other-month",weekendCls:"b-weekend",todayCls:"b-today",nonWorkingDayCls:"b-nonworking-day",dayNameFormat:"ddd",minRowHeight:{$config:["lazy"],value:null},minColumnWidth:{$config:["lazy"],value:null},disableOtherMonthCells:null,disableOtherMonthCellsCls:"b-disable-othermonth-cells",hideOtherMonthCells:null,hideOtherMonthCellsCls:"b-hide-othermonth-cells",animateTimeShift:!0}}construct(t){super.construct(t),this.refreshCount||this.refresh()}onInternalPaint({firstPaint:t}){var e;(e=super.onInternalPaint)==null||e.call(this,...arguments),t&&(this.refreshCount||this.refresh(),this.getConfig("minColumnWidth"),this.getConfig("minRowHeight"))}get overflowElement(){return this.weeksElement}doDestroy(){var t;(t=this.tip)==null||t.destroy(),super.doDestroy()}updateMinRowHeight(t){this.element.style.setProperty("--min-row-height",g.setLength(t)),this.scrollable={overflowY:t?"auto":!1}}updateMinColumnWidth(t){const e=this;e.element.style.setProperty("--min-column-width",g.setLength(t)),e.scrollable={overflowX:t?"auto":!1},e.overflowElement.classList[t?"add":"remove"]("b-min-columnwidth")}getDateFromDomEvent(t){const e=(t.nodeType===Element.ELEMENT_NODE?t:t.target).closest(`#${this.id} [data-date]`);if(e)return c.parseKey(e.dataset.date)}changeTip(t,e){const i=this;return ut.reconfigure(e,t,{owner:i,defaults:{type:"tooltip",owner:i,id:`${i.id}-cell-tip`,forElement:i.bodyElement,forSelector:`.${i.dayCellCls}`}})}updateTip(t){this.detachListeners("tip"),t==null||t.ion({pointerOver:"onTipOverCell",name:"tip",thisObj:this})}updateElement(t,e){const i=this;super.updateElement(t,e),i.updateHideNonWorkingDays(i.hideNonWorkingDays),i.weekdayCells=Array.from(t.querySelectorAll(".b-calendar-day-header")),i.weekElements=Array.from(t.querySelectorAll(".b-calendar-week")),i.weekDayElements=Array.from(t.querySelectorAll(".b-calendar-days")),i.cellElements=[];for(let r=0,{length:a}=i.weekDayElements;r<a;r++)i.cellElements.push(i.weekDayElements[r].previousSibling,...i.weekDayElements[r].children)}changeDate(t){if(t=typeof t=="string"?c.parse(t):new Date(t),isNaN(t))throw new Error("CalendarPanel date ingestion must be passed a Date, or a YYYY-MM-DD date string");return c.clearTime(t)}updateDate(t){this.month.date=t}updateDayNameFormat(){const t=new Date("2000-06-04T12:00:00");this.shortDayNames=[];for(let e=4;e<11;e++)t.setDate(e),this.shortDayNames.push(c.format(t,this.dayNameFormat))}get weekStartDay(){return typeof this._weekStartDay=="number"?this._weekStartDay:c.weekStartDay}updateWeekStartDay(t){const e=this;if(e._month){e.month.weekStartDay=t,e.dayNames=[];for(let i=0;i<7;i++)e.dayNames[i]=e.shortDayNames[e.canonicalDayNumbers[i]];e.refreshCount&&e.refresh()}}updateHideNonWorkingDays(t){var e;this.contentElement.classList.toggle(this.hideNonWorkingDaysCls,!!t),(e=this.scrollable)==null||e.syncOverflowState(),this._month&&(this.month.hideNonWorkingDays=t),this.isConfiguring||this.refresh()}updateHideOtherMonthCells(t){var e;this.element.classList.toggle(this.hideOtherMonthCellsCls,!!t),(e=this.scrollable)==null||e.syncOverflowState()}updateDisableOtherMonthCells(t){var e;this.element.classList.toggle(this.disableOtherMonthCellsCls,!!t),(e=this.scrollable)==null||e.syncOverflowState()}get nonWorkingDays(){return this._nonWorkingDays||this._localeNonWorkingDays||(this._localeNonWorkingDays=c.nonWorkingDays)}get weekends(){return this._localeWeekends||(this._localeWeekends=c.weekends)}changeNonWorkingDays(t){return O.assign({},t)}updateNonWorkingDays(t){var e;this._month&&(this.month.nonWorkingDays=t,this.refresh(),(e=this.scrollable)==null||e.syncOverflowState())}get visibleDayColumnIndex(){return this.month.visibleDayColumnIndex}get dayColumnIndex(){return this.month.dayColumnIndex}get canonicalDayNumbers(){return this.month.canonicalDayNumbers}get visibleColumnCount(){return this.month.visibleColumnCount}get weekLength(){return this.month.weekLength}get startDate(){return this.month.startDate}get duration(){return c.diff(this.month.startDate,this.month.endDate,"day")+1}get endDate(){const{endDate:t}=this.month;if(t)return c.add(t,1,"day")}changeMonth(t,e){const i=this;if(!(t instanceof se)){if(typeof t=="number"){if(e){e.month=t;return}const r=i.date||c.clearTime(new Date);r.setMonth(t),t={date:r}}t=se.new({weekStartDay:i.weekStartDay,nonWorkingDays:i.nonWorkingDays,hideNonWorkingDays:i.hideNonWorkingDays,sixWeeks:i.sixWeeks},t)}return t.ion({dateChange:"onMonthDateChange",thisObj:i}),t}onMonthDateChange({source:t,newDate:e,oldDate:i,changes:r}){const a=this;if(a.year=t.year,!a.isConfiguring){if(!a.getCell(e)||r.m||r.y){const{isVisible:n}=a;a.refresh(),a.animateTimeShift&&n&&g.slideIn(a.contentElement,e>i?1:-1)}a.trigger("dateChange",{changes:r,value:e,oldValue:i})}}updateYear(t){this.month.year=t}updateShowWeekNumber(t){this.updateShowWeekColumn(t)}updateShowWeekColumn(t){const e=this;e.element.classList[t?"add":"remove"]("b-show-week-column"),e.floating&&(e.isAligning||e.realign())}updateSixWeeks(t){this.month&&(this.month.sixWeeks=t,this.refresh())}refresh(){this.doRefresh()}doRefresh(){var t;this.getConfig("element");const e=this,i=e.timeZone!=null?e.timeZone:(t=e.project)==null?void 0:t.timeZone,r=i!=null?ot.toTimeZone(new Date,i):new Date,{weekElements:a,weekDayElements:n,date:l,month:s,dayCellCls:o,dayHeaderCls:u,disabledCls:d,otherMonthCls:y,weekendCls:p,todayCls:f,nonWorkingDayCls:v,nonWorkingDays:b,canonicalDayNumbers:C,sixWeeks:k}=e;if(r.setHours(0,0,0,0),!l){e.date=r;return}e.element.style.setProperty("--visible-week-count",s.weekCount),e.trigger("beforeRefresh"),e.getConfig("dayNameFormat");for(let D=0;D<7;D++){const T=e.weekdayCells[D],M=e.canonicalDayNumbers[D],L={[u]:1,[p]:c.weekends[M],[v]:b[M]};e.headerRenderer?(T.innerHTML="",e.callback(e.headerRenderer,e,[T,D,M])):g.setInnerText(T,e.shortDayNames[M]),g.syncClassList(T,L),T.dataset.columnIndex=D,T.dataset.cellDay=M}let w=0,_=0,S=6;for(let D=6;D>=0;D--)if(!b[C[D]]){S=D;break}a[4].classList.toggle("b-hide-display",s.weekCount<5&&!k),a[5].classList.toggle("b-hide-display",s.weekCount<6&&!k),s.eachWeek((D,T)=>{const M=n[w],L=[M.previousSibling,...M.children];a[w].dataset.week=`${D[0]},${D[1]}`,e.weekRenderer?e.callback(e.weekRenderer,e,[L[0],D]):L[0].innerText=D[1];for(let Y=0;Y<7;Y++){const A=T[Y],re=A.getDay(),Ee=c.makeKey(A),Qe=b[re],N=L[Y+1],et={[o]:1,[d]:e.isDisabledDate(A),[y]:A.getMonth()!==s.month,[p]:c.weekends[re],[f]:A.getTime()===r.getTime(),[v]:Qe,"b-last-working-day":Y===S,"b-first-visible-cell":!(A-(e.firstVisibleDate||-1)),"b-last-visible-cell":!(A-(e.lastVisibleDate||-1)),[`b-day-of-week-${re}`]:1};g.syncClassList(N,et),N.dataset.date=Ee,N.dataset.cellIndex=_,N.dataset.columnIndex=Y,N.lastDomConfig&&(delete N.lastDomConfig.class,delete N.lastDomConfig.className),e.cellRenderer?e.callback(e.cellRenderer,e,[{cell:N,date:A,day:re,row:a[w],rowIndex:w,cellIndex:_,columnIndex:Y,visibleColumnIndex:e.visibleDayColumnIndex[re],week:D,key:Ee}]):N.innerHTML=A.getDate(),_++}w++}),e.visibleWeekCount=w,e.floating&&(e.isAligning||e.realign()),e.refreshCount=(e.refreshCount||0)+1,e.trigger("refresh")}isDisabledDate(t){const e=t.getDay(),{disabledDates:i,nonWorkingDays:r}=this;if(this.disableWeekends&&r[e])return!0;if(i)return Array.isArray(i)?(t=c.clearTime(t,!0),i.some(a=>!(c.clearTime(a,!0)-t))):this.callback(this.disabledDates,this,[t])}get bodyConfig(){const t=super.bodyConfig,e=[];t.children=[{tag:"div",className:"b-calendar-row b-calendar-weekdays",reference:"weekdaysHeader",children:[{class:"b-week-number-cell"},...R.fill(7,{class:this.dayHeaderCls}),g.scrollBarPadElement]},{className:"b-weeks-container notranslate",reference:"weeksElement",children:e}];for(let i=0;i<6;i++){const r={className:"b-calendar-row b-calendar-week",dataset:{rowIndex:i},children:[{className:"b-week-number-cell"},{className:"b-calendar-days",children:[{},{},{},{},{},{},{}],syncOptions:{ignoreRefs:!0,strict:!1}}]};e.push(r)}return t}get firstVisibleDate(){if(this.hideOtherMonthCells){const{year:t,month:e}=this.month;return new Date(t,e,1)}for(const t=this,e=t.month.startDate;;e.setDate(e.getDate()+1))if(!t.hideNonWorkingDays||!t.nonWorkingDays[e.getDay()])return e}get lastVisibleDate(){const t=c.add(this.endDate,-1,"d");if(this.hideOtherMonthCells)return t;for(const e=this,i=t;;i.setDate(i.getDate()-1))if(!e.hideNonWorkingDays||!e.nonWorkingDays[i.getDay()])return i}getCell(t,e){typeof t!="string"&&(t=c.makeKey(t));const i=this.weeksElement.querySelector(`[data-date="${t}"]`);if(i&&(!e||!i.classList.contains(this.otherMonthCls)))return i}onTipOverCell({source:t,target:e}){t.date=c.parseKey(e.dataset.date)}updateLocalization(){this._localeNonWorkingDays=this._localeWeekends=null,this.updateDayNameFormat(),this.updateWeekStartDay(this.weekStartDay),super.updateLocalization()}};m(W,"$name","CalendarPanel"),m(W,"type","calendarpanel"),W.initClass(),W._$name="CalendarPanel";var V=class extends ye{construct(t){super.construct({year:new Date().getFullYear(),...t}),x.on({element:this.contentElement,click:"onYearClick",delegate:".b-yearpicker-year",thisObj:this})}get focusElement(){return this.getYearButton(this.year)||this.getYearButton(this.startYear)}getYearButton(t){return this.contentElement.querySelector(`.b-yearpicker-year[data-year="${t}"]`)}get value(){return this.year}set value(t){this.year=t}onYearClick({target:t}){const e=Math.min(Math.max(parseInt(t.innerText),this.minYear||1),this.maxYear||9999);this.year===e?this.trigger("select",{oldValue:e,value:e}):this.year=e}handleTitleClick(t){this.trigger("titleClick",t)}previous(){this.startYear=this.startYear-this.yearButtonCount}next(){this.startYear=this.endYear+1}ingestYear(t){if(!isNaN(t))return O.isDate(t)?t.getFullYear():t}changeYear(t){if(t=this.ingestYear(t))return Math.min(Math.max(t,this.minYear||1),this.maxYear||9999)}updateYear(t,e){const i=this;!i.startYear||t>i.endYear?i.startYear=t:t<i.startYear&&(i.startYear=t-(i.yearButtonCount-1)),i.isConfiguring||i.trigger("select",{oldValue:e,value:t})}get endYear(){return this.startYear+this.yearButtonCount-1}changeStartYear(t){if(t=this.ingestYear(t))return t=this.minYear?Math.max(t,this.minYear):t,this.maxYear?Math.min(t,this.maxYear-(this.yearButtonCount-1)):t}async updateStartYear(t,e){this.isVisible&&g.slideIn(this.contentElement,Math.sign(t-e))}composeBody(){this.getConfig("year");const{startYear:t}=this,e=super.composeBody(),i=e.children[this.tbar?1:0].children=[];this.widgetMap.title.text=`${`000${t}`.slice(-4)} - ${`000${this.endYear}`.slice(-4)}`;for(let r=0,a=t;r<this.yearButtonCount;r++,a++)i.push({tag:"button",dataset:{year:a},class:{"b-yearpicker-year":1,"b-selected":a===this.year},text:`000${a}`.slice(-4)});return e}};m(V,"$name","YearPicker"),m(V,"type","yearpicker"),m(V,"configurable",{textContent:!1,tbar:{overflow:null,items:{previous:{type:"tool",cls:"b-icon b-icon-previous",onAction:"up.previous",weight:100},title:{type:"button",cls:"b-yearpicker-title",weight:200,onAction:"up.handleTitleClick"},next:{type:"tool",cls:"b-icon b-icon-next",onAction:"up.next",weight:300}}},itemCls:"b-year-container",yearButtonCount:12,year:null,minYear:null,maxYear:null,startYear:null}),V.initClass(),V._$name="YearPicker";var K=class extends Ye{static get configurable(){return{readOnly:!0,editable:!1,cls:"b-display-field",template:null,ariaElement:"displayElement"}}get focusElement(){}changeReadOnly(){return!0}changeEditable(){return!1}get inputElement(){return{tag:"span",id:`${this.id}-input`,reference:"displayElement",html:this.template?this.template(this.value):de.encodeHtml(this.value)}}};m(K,"$name","DisplayField"),m(K,"type","displayfield"),m(K,"alias","display"),K.initClass(),K._$name="DisplayField";var Be=()=>c.getMonthNames().map((t,e)=>[e,t]),Xe=(t,e)=>t.valueOf()-e.valueOf(),Ct=Object.freeze([]),kt=class extends tt{static get $name(){return"ReadOnlyCombo"}static get type(){return"readonlycombo"}static get configurable(){return{editable:!1,inputAttributes:{tag:"div",tabIndex:-1},inputValueAttr:"innerHTML",highlightExternalChange:!1,monitorResize:!1,triggers:{expand:!1},picker:{align:{align:"t-b",axisLock:!0,matchSize:!1},cls:"b-readonly-combo-list",scrollable:{overflowX:!1}}}}};kt.initClass();var G=class extends W{static get delayable(){return{refresh:"raf"}}static get configurable(){return{activeDate:{value:new Date,$config:{equal:"date"}},focusable:!0,textContent:!1,tbar:{overflow:null,items:{prevYear:{cls:"b-icon b-icon-first",onAction:"up.gotoPrevYear",tooltip:"L{DatePicker.gotoPrevYear}"},prevMonth:{cls:"b-icon b-icon-previous",onAction:"up.gotoPrevMonth",tooltip:"L{DatePicker.gotoPrevMonth}"},fields:{type:"container",cls:"b-datepicker-title",items:{monthField:{type:"readonlycombo",cls:"b-datepicker-monthfield",items:Be(),internalListeners:{select:"up.onMonthPicked"}},yearButton:{type:"button",cls:"b-datepicker-yearbutton",internalListeners:{click:"up.onYearPickerRequested"}}}},nextMonth:{cls:"b-icon b-icon-next",onAction:"up.gotoNextMonth",tooltip:"L{DatePicker.gotoNextMonth}"},nextYear:{cls:"b-icon b-icon-last",onAction:"up.gotoNextYear",tooltip:"L{DatePicker.gotoNextYear}"}}},yearPicker:{value:{type:"YearPicker",yearButtonCount:16,trapFocus:!0,positioned:!0,hidden:!0,internalListeners:{titleClick:"up.onYearPickerTitleClick",select:"up.onYearPicked"}},$config:"lazy"},date:null,minDate:{value:null,$config:{equal:"date"}},maxDate:{value:null,$config:{equal:"date"}},focusDisabledDates:null,multiSelect:!1,selection:{$config:{equal:(t,e)=>t&&t.equals(e)},value:null},editMonth:!0,dayNameFormat:"dd",trapFocus:!0,role:"grid",focusDescendant:!0,alwaysRefreshOnMonthChange:null}}static get prototypeProperties(){return{outOfRangeCls:"b-out-of-range",activeCls:"b-active-date",selectedCls:"b-selected-date"}}construct(t){const e=this;super.construct(t),e.externalCellRenderer=e.cellRenderer,e.cellRenderer=e.internalCellRenderer,e.element.setAttribute("aria-activedescendant",`${e.id}-active-day`),e.weeksElement.setAttribute("role","grid"),e.weekElements.forEach(i=>i.setAttribute("role","row")),e.element.setAttribute("ariaLabelledBy",e.widgetMap.fields.id),x.on({element:e.weeksElement,click:{handler:"onCellClick",delegate:`.${e.dayCellCls}:not(.${e.disabledCls}):not(.${e.outOfRangeCls})`},mousedown:{handler:"onCellMousedown",delegate:`.${e.dayCellCls}`},thisObj:e}),e.widgetMap.monthField.readOnly=e.widgetMap.yearButton.disabled=!e.editMonth,e.refresh.flush()}afterHide(){var t;(t=this._yearPicker)==null||t.hide(),super.afterHide(...arguments)}doDestroy(){var t,e;(t=this.yearButton)==null||t.destroy(),(e=this.monthField)==null||e.destroy(),super.doDestroy()}get focusElement(){return this.weeksElement.querySelector(`.${this.dayCellCls}[tabIndex="0"]`)}doRefresh(){const t=this,{date:e}=t,i=t.focusElement,r=c.betweenLesser(t.activeDate,t.month.startDate,t.month.endDate)?t.activeDate:t._activeDate=e;t.getConfig("tbar"),super.doRefresh(...arguments),t.widgetMap.monthField.value=e.getMonth(),t.widgetMap.yearButton.text=e.getFullYear();const a=c.parseKey(i==null?void 0:i.dataset.date);r-a&&t.syncActiveDate(r,a)}internalCellRenderer({cell:t,date:e}){const i=this,{activeCls:r,selectedCls:a,externalCellRenderer:n}=i,l=i.isSelectedDate(e),s={[r]:r&&i.isActiveDate(e),[a]:l,[i.outOfRangeCls]:i.minDate&&e<i.minDate||i.maxDate&&e>i.maxDate};if(l&&i.multiSelect){const o=!i.isSelectedDate(c.add(e,-1,"d")),u=!i.isSelectedDate(c.add(e,1,"d"));s["b-range-start"]=o,s["b-range-end"]=u,s["b-in-range"]=!o&&!u}g.updateClassList(t,s),t.innerHTML=`<div class="b-datepicker-cell-inner">${e.getDate()}</div>`,t.setAttribute("role","gridcell"),t.setAttribute("aria-label",c.format(e,"MMMM D, YYYY")),i.isActiveDate(e)?t.id=`${i.id}-active-day`:t.removeAttribute("id"),n&&(arguments[0].cell=t.firstChild,i.callback(n,this,arguments))}onCellMousedown(t){const e=t.target.closest("[data-date]");e.focus(),g.getActiveElement(e)===e&&t.preventDefault(),this.activeDate=c.parseKey(e.dataset.date)}onCellClick(t){const e=t.target.closest("[data-date]");this.onUIDateSelect(c.parseKey(e.dataset.date),t)}onUIDateSelect(t,e){const i=this,{lastClickedDate:r,multiSelect:a}=i;i.lastClickedDate=t,i.isDisabledDate(t)||(i.activatingEvent=e,a?i.handleMultiSelect(r,t,e):(i.selection=t,i.floating&&i.hide()),i.activatingEvent=null)}handleMultiSelect(t,e,i){const r=this,{multiSelect:a}=r,n=r._selection||(r._selection=new fe),l=n.dates,s=a==="range",{size:o,generation:u}=n,d=o&&{[c.makeKey(c.add(l[0],-1,"d"))]:1,[c.makeKey(l[0])]:1,[c.makeKey(l[l.length-1])]:1,[c.makeKey(c.add(l[l.length-1],1,"d"))]:1},y=n.has(e),p=y?"delete":"add",f=s&&(d==null?void 0:d[c.makeKey(e)]);if(i.ctrlKey)(a===!0||!o||f)&&(n[p](e),s&&!n.has(r.rangeStartDate)&&r.rangeStartDate.setDate(r.rangeStartDate.getDate()+(e<l[1]?1:-1)));else if(i.shiftKey&&o){const[b,C]=[new Date(s?r.rangeStartDate||(r.rangeStartDate=l[0]):t),e].sort(Xe);s&&n.clear();for(const k=b;k<=C;k.setDate(k.getDate()+1))n.add(k)}else n.has(e)&&n.size===1||(n.clear(),n.add(e));const v=n.size;v===1?r.rangeStartDate=e:v||(r.rangeStartDate=null),n.generation!==u&&r.updateSelection(n)}changeSelection(t){const e=this;let i,r;if(t)if(t.forEach||(t=[t]),t.forEach((a,n)=>t[n]=e.changeDate(a)),r=t[0],t.sort(Xe),e.multiSelect==="range"&&t.length===2){i=new fe;for(const a=new Date(t[0]);a<=t[1];a.setDate(a.getDate()+1))i.add(a)}else r=t[0],i=new fe(t);else i=new fe;return r&&(e.activeDate=e.rangeStartDate=c.clearTime(r)),i}updateMultiSelect(t){this.element.classList.toggle("b-multiselect",!!t),t||(this.selection=[...this.selection][0])}updateSelection(t){const e=this,{dates:i}=t,r=e.multiSelect==="range"?[i[0],i[i.length-1]]:i;i.length&&(e.date=i[0]),e.isConfiguring||(e.refresh.now(),e.trigger("selectionChange",{selection:r,userAction:!!e.activatingEvent}))}get selection(){const{_selection:t}=this,e=t?t.dates:Ct;return this.multiSelect==="range"&&e.length?[e[0],e[e.length-1]]:e}onInternalKeyDown(t){const e=this,i=t.key.trim()||t.code,r=e.activeDate;let a=new Date(r);if(i==="Escape"&&e.floating)return e.hide();if(r&&e.weeksElement.contains(t.target)){do switch(i){case"ArrowLeft":t.preventDefault(),t.ctrlKey?a=e.gotoPrevMonth():a.setDate(a.getDate()-1);break;case"ArrowUp":t.preventDefault(),a.setDate(a.getDate()-7);break;case"ArrowRight":t.preventDefault(),t.ctrlKey?a=e.gotoNextMonth():a.setDate(a.getDate()+1);break;case"ArrowDown":t.preventDefault(),a.setDate(a.getDate()+7);break;case"Enter":return e.onUIDateSelect(r,t)}while(e.isDisabledDate(a)&&!e.focusDisabledDates);if(e.minDate&&a<e.minDate||e.maxDate&&a>e.maxDate)return;e.activeDate=a}}changeMinDate(t){return t&&W.prototype.changeDate.apply(this,arguments)}updateMinDate(t){this._yearpicker&&(this._yearpicker.minYear=t==null?void 0:t.getFullYear()),this.refresh()}changeMaxDate(t){return t&&W.prototype.changeDate.apply(this,arguments)}updateMaxDate(t){this._yearpicker&&(this._yearpicker.maxYear=t==null?void 0:t.getFullYear()),this.refresh()}changeDate(t){return c.clamp(super.changeDate(t),this.minDate,this.maxDate)}updateDate(t,e){const i=this,{month:r}=i;if(i.isConfiguring&&!i.initializingActiveDate&&(i.selection=t),!r.date||t.getMonth()===r.month||!i.getCell(t)||i.alwaysRefreshOnMonthChange||i.isNavigating)super.updateDate(t);else{const a=r.getOtherMonth(t),n=i.eventListeners&&(e?t.getDate()!==e.getDate()|(a.getWeekId(t)!==r.getWeekId(e))<<1|(t.getMonth()!==(e==null?void 0:e.getMonth()))<<2|(t.getFullYear()!==(e==null?void 0:e.getFullYear()))<<3:15);i.trigger("dateChange",{changes:{d:!0,w:!!(n&2),m:!!(n&12),y:!!(n&8),r:a.weekCount!==r.weekCount},value:t,oldValue:e})}}changeActiveDate(t,e){if(this.trigger("beforeActiveDateChange",{activeDate:t,oldActiveDate:e})!==!1){if(t=t?this.changeDate(t):this.date||(this.date=c.clearTime(new Date)),isNaN(t))throw new Error("DatePicker date ingestion must be passed a Date, or a YYYY-MM-DD date string");return c.clamp(t,this.minDate,this.maxDate)}}updateActiveDate(t,e){const i=this,{isConfiguring:r}=i;(r||!i.getCell(t))&&(i.initializingActiveDate=r,i.date=t,i.initializingActiveDate=!1),!r&&!i.refresh.isPending&&i.syncActiveDate(t,e)}syncActiveDate(t,e){const i=this,{activeCls:r}=i,a=i.getCell(t),n=e&&i.getCell(e),l=g.getActiveElement(i.element);a.setAttribute("tabIndex",0),r&&a.classList.add(r),a.id=`${i.id}-active-day`,i.weeksElement.contains(l)&&a.focus(),n&&n!==a&&(n.removeAttribute("tabIndex"),r&&n.classList.remove(r),n.removeAttribute("id"))}set value(t){const e=this,{selection:i,duration:r}=e;if(t){if(t=e.changeDate(t,e.value),e.multiSelect==="range"&&(i==null?void 0:i.length)===2){c.betweenLesserEqual(t,...i)||(t<i[0]?e.selection=[t,c.add(t,r-1,"d")]:e.selection=[c.add(t,-(r-1),"d"),t]),e.date=e.activeDate=t;return}t!==void 0&&(e.selection=t)}else e.date=new Date,e.selection=null}get value(){return this.selection[this.selection.length-1]}get duration(){return this.multiSelect==="range"?c.diff(...this.selection,"d")+1:1}gotoPrevYear(){return this.goto(-1,"year")}gotoPrevMonth(){return this.goto(-1,"month")}gotoNextMonth(){return this.goto(1,"month")}gotoNextYear(){return this.goto(1,"year")}goto(t,e){const i=this,{activeDate:r}=i,a=r&&i.getCell(r);let n;e==="month"&&a&&(r==null?void 0:r.getMonth())===i.month.month+t?n=r:n=c.add(a?r:i.date,t,e);const l=new Date(n);l.setDate(1);const s=c.add(c.add(l,1,"month"),-1,"day");if(i.minDate&&t<0&&s<i.minDate||i.maxDate&&t>0&&l>i.maxDate)return;i.isNavigating=!0;const o=i.date=n;return a&&(i.activeDate=n),i.isNavigating=!1,o}isActiveDate(t){return!(t-this.activeDate)}isSelectedDate(t){var e;return(e=this._selection)==null?void 0:e.has(t)}onMonthPicked({record:t,userAction:e}){var i;e&&(this.activeDate=c.add(this.activeDate,t.value-this.activeDate.getMonth(),"month"),(i=this.focusElement)==null||i.focus())}onYearPickerRequested(){const{yearPicker:t}=this;t.isVisible?t.hide():(t.year=t.startYear=this.activeDate.getFullYear(),t.show(),t.focus())}onYearPickerTitleClick(){this.yearPicker.hide()}onYearPicked({value:t,source:e}){const i=new Date(this.activeDate);i.setFullYear(t),this.activeDate=i,this.focusElement&&g.focusWithoutScrolling(this.focusElement),e.hide()}changeYearPicker(t,e){var i,r;return V.reconfigure(e,t?V.mergeConfigs({owner:this,appendTo:this.element,minYear:(i=this.minDate)==null?void 0:i.getFullYear(),maxYear:(r=this.maxDate)==null?void 0:r.getFullYear()},t):null,this)}get childItems(){const{_yearPicker:t}=this,e=super.childItems;return t&&e.push(t),e}updateLocalization(){var t;const{monthField:e}=this.widgetMap,i=Be();!this.isConfiguring&&!i.every((r,a)=>r[1]===e.store.getAt(a).text)&&(i[(t=e.value)!=null?t:this.date.getMonth()].selected=!0,e.items=i),super.updateLocalization()}};m(G,"$name","DatePicker"),m(G,"type","datepicker");var fe=class Ze extends Set{add(e){return e=c.makeKey(e),this.has(e)||(this.generation=(this.generation||0)+1),super.add(e)}delete(e){return e=c.makeKey(e),this.has(e)&&this.generation++,super.delete(e)}has(e){return super.has(c.makeKey(e))}clear(){return this.size&&this.generation++,super.clear()}equals(e){return Array.isArray(e)&&(e=new Ze(e)),e.size===this.size&&[...this].every(i=>e.has(i))}get dates(){return[...this].sort().map(e=>c.parseKey(e))}};G.initClass(),G._$name="DatePicker";var Z=class extends Le{static get configurable(){return{format:"L",strictParsing:!1,fallbackFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss:SSS",keepTime:!1,pickerFormat:null,validateDateOnly:null,triggers:{expand:{cls:"b-icon-calendar",handler:"onTriggerClick",weight:200},back:{cls:"b-icon b-icon-angle-left b-step-trigger",key:"Shift+ArrowDown",handler:"onBackClick",align:"start",weight:100},forward:{cls:"b-icon b-icon-angle-right b-step-trigger",key:"Shift+ArrowUp",handler:"onForwardClick",align:"end",weight:100}},calendarContainerCls:"",min:null,max:null,step:!1,stepTriggers:null,weekStartDay:null,picker:{type:"datepicker",role:"dialog",floating:!0,scrollAction:"realign",align:{align:"t0-b0",axisLock:!0}},value:null}}changePicker(t,e){const i=this,r={owner:i,forElement:i[i.pickerAlignElement],minDate:i.min,maxDate:i.max,weekStartDay:i._weekStartDay,align:{anchor:i.overlayAnchor,target:i[i.pickerAlignElement]},onSelectionChange:({selection:n,source:l})=>{l.isVisible&&(i._isUserAction=i._isPickerInput=!0,i.value=i.value?c.copyTimeValues(new Date(n[0]),i.value):new Date(n[0]),i._isPickerInput=i._isUserAction=!1,l.hide())}};i.calendarContainerCls&&(r.cls=i.calendarContainerCls),i.value?r.value=i.value:r.activeDate=new Date;const a=G.reconfigure(e,t,{owner:i,defaults:r});return a==null||a.refresh.flush(),a}get backShiftDate(){return c.add(this.value,-1*this._step.magnitude,this._step.unit)}onBackClick(){const t=this,{min:e}=t;if(!t.readOnly&&t.value){const i=t.backShiftDate;(!e||e.getTime()<=i)&&(t._isUserAction=!0,t.value=i,t._isUserAction=!1)}}get forwardShiftDate(){return c.add(this.value,this._step.magnitude,this._step.unit)}onForwardClick(){const t=this,{max:e}=t;if(!t.readOnly&&t.value){const i=t.forwardShiftDate;(!e||e.getTime()>=i)&&(t._isUserAction=!0,t.value=i,t._isUserAction=!1)}}showPicker(t){if(this.readOnly)return;const e=this,{_picker:i}=e;if(i){const r={minDate:e.min,maxDate:e.max};e.value?r.value=e.value:i.activeDate||(r.activeDate=new Date),i.setConfig(r)}super.showPicker(t)}focusPicker(){this.picker.focus()}get isValid(){const t=this;t.clearError("L{Field.minimumValueViolation}",!0),t.clearError("L{Field.maximumValueViolation}",!0);let e=t.value;if(e){const{min:i,max:r,validateDateOnly:a}=t;if(a&&(e=c.clearTime(e,!1)),i&&e<i)return t.setError("L{Field.minimumValueViolation}",!0),!1;if(r&&e>r)return t.setError("L{Field.maximumValueViolation}",!0),!1}return super.isValid}transformDateValue(t,e=!0){const i=this;return t!=null&&(c.isDate(t)||(typeof t=="string"?t=c.parse(t,i.format,i.strictParsing)||c.parse(t,i.fallbackFormat,i.strictParsing):t=new Date(t)),c.isValidDate(t))?e&&(!i.min||t-i.min>-c.MS_PER_DAY)&&(!i.max||t<=i.max)?i.transformTimeValue(t):t:null}transformTimeValue(t){const e=this,{keepTime:i}=e;if(t=c.clone(t),!i)c.clearTime(t,!1);else if(i!=="entered"&&i!==!0){const r=c.parse(i,e.timeFormat);c.isValidDate(r)?c.copyTimeValues(t,r):c.isValidDate(e.value)&&c.copyTimeValues(t,e.value)}else i===!0&&(e._isPickerInput||e.inputting)&&c.isValidDate(e.value)&&c.copyTimeValues(t,e.value);return t}changeMin(t){return this.transformDateValue(t,!1)}updateMin(t){const{input:e,_picker:i}=this;e&&(t==null?e.removeAttribute("min"):e.min=t),i&&(i.minDate=t),this.syncInvalid()}changeMax(t){return this.transformDateValue(t,!1)}updateMax(t){const{input:e,_picker:i}=this;e&&(t==null?e.removeAttribute("max"):e.max=t),i&&(i.maxDate=t),this.syncInvalid()}get weekStartDay(){return typeof this._weekStartDay=="number"?this._weekStartDay:c.weekStartDay}updateWeekStartDay(t){this._picker&&(this._picker.weekStartDay=t)}changeValue(t,e){const i=this,r=i.transformDateValue(t);if(t&&!r){i.setError("L{invalidDate}");return}if(i.clearError("L{invalidDate}"),i.hasChanged(e,r))return super.changeValue(r,e);i.inputting||i.syncInputFieldValue()}updateValue(t,e){const i=this._picker;i&&!this.inputting&&(i.value=i.activeDate=t),super.updateValue(t,e)}changeStep(t,e){const i=typeof t;if(!t)return null;if(i==="number"?t={magnitude:Math.abs(t),unit:e?e.unit:"day"}:i==="string"&&(t=c.parseDuration(t)),t&&t.unit&&t.magnitude)return t.magnitude<0&&(t={magnitude:-t.magnitude,unit:t.unit}),t}updateStep(t){this.element.classList[t?"remove":"add"]("b-no-steppers"),this.syncInvalid()}hasChanged(t,e){return t!=null&&t.getTime&&(e!=null&&e.getTime)&&this.keepTime!=="entered"&&this.keepTime!==!0?!c.isEqual(c.clearTime(t),c.clearTime(e)):super.hasChanged(t&&t.getTime(),e&&e.getTime())}get inputValue(){const t=this.value;return t?c.format(t,this.format):""}updateFormat(){this.isConfiguring||this.syncInputFieldValue(!0)}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue(!0)}internalOnKeyEvent(t){super.internalOnKeyEvent(t),t.key==="Enter"&&this.isValid&&this.picker.hide()}};m(Z,"$name","DateField"),m(Z,"type","datefield"),m(Z,"alias","date"),Z.initClass(),Z._$name="DateField";var xt=t=>t.ctrlKey&&t.preventDefault(),J=class extends at{static get configurable(){return{wrapAround:null,min:null,max:null,step:1,largeStep:0,value:null,format:"",decimalPrecision:null,leadingZeroes:null,triggers:{spin:{type:"spintrigger"}},changeOnSpin:!0,inputType:null}}construct(t){super.construct(t);const e=this;e.input.addEventListener("dblclick",()=>{e.select()}),typeof e.changeOnSpin=="number"&&(e.bufferedSpinChange=e.buffer(e.triggerChange,e.changeOnSpin))}acceptValue(t,e){let i=!isNaN(t);if(i&&!this.hasTextSelection){i=!1;const r=this.input.value,a=parseFloat(r);r!==e&&(i=!this.acceptValue(a,r))}return i}okMax(t){return isNaN(this.max)||t<=this.max}okMin(t){return isNaN(this.min)||t>=this.min}internalOnKeyEvent(t){if(t.type==="keydown"){const e=this,i=t.key;let r;if(i==="ArrowUp")e.doSpinUp(t.shiftKey),r=!0;else if(i==="ArrowDown")e.doSpinDown(t.shiftKey),r=!0;else if(!t.altKey&&!t.ctrlKey&&i&&i.length===1){const a=e.getAfterValue(i),n=e.formatter.parseStrict(a);r=!(n===e.value||a==="-"&&(isNaN(e.min)||e.min<0))&&!e.acceptValue(n,a)}i==="Enter"&&e._changedBySilentSpin&&(e.triggerChange(t,!0),e._changedBySilentSpin=!1),r&&t.preventDefault()}super.internalOnKeyEvent(t)}doSpinUp(t=!1){const e=this;if(e.readOnly)return;let i=(e.value||0)+(t?e.largeStep:e.step);e.okMin(i)||(i=e.min),e.okMax(i)?e.applySpinChange(i):e.wrapAround&&(i=e.min,e.applySpinChange(i))}doSpinDown(t=!1){const e=this;if(e.readOnly)return;let i=(e.value||0)-(t?e.largeStep:e.step);e.okMax(i)||(i=e.max),e.okMin(i)?e.applySpinChange(i):e.wrapAround&&(i=e.max,e.applySpinChange(i))}applySpinChange(t){const e=this;e._isUserAction=!0,e.changeOnSpin!==!0&&(e._changedBySilentSpin=!0,e.silenceChange=!0,e.bufferedSpinChange&&e.bufferedSpinChange(null,!0)),e.value=t,e._isUserAction=!1,e.silenceChange=!1}triggerChange(){this.silenceChange||super.triggerChange(...arguments)}onFocusOut(t){var e,i,r;super.onFocusOut(...arguments);const a=this,{input:n}=a,l=n.value,s=a.formatter.truncate(l),o=isNaN(s)?l:a.formatValue(s);(r=(i=(e=a.triggers)==null?void 0:e.spin)==null?void 0:i.clickRepeater)==null||r.cancel(),a.lastTouchmove=null,l!==o&&(n.value=o),a._changedBySilentSpin&&(a.triggerChange(t,!0),a._changedBySilentSpin=!1)}internalOnInput(t){const e=this,{formatter:i,input:r}=e,{parser:a,maximumFractionDigits:n}=i,l=r.value,s=a.decimalPlaces(l);if(i.truncator&&s>n){let o=l,u;const d=i.truncate(l);if(!isNaN(d)&&(o=e.formatValue(d),u=a.decimalPlaces(o),u<n&&(o+="0".repeat(n-u),u=n),u<s)){const y=l.length-e.caretPos;r.value=o,e.caretPos=o.length-y+1}}super.internalOnInput(t)}formatValue(t){return this.formatter.format(t)}changeFormat(t){const e=this;if(t===""){const{leadingZeroes:i,decimalPrecision:r}=e;t=i?`${i}>9`:null,r!=null?t=`${t||""}9.${"#".repeat(r)}`:t&&(t+=".*")}return t}get formatter(){const t=this,e=t.format;let i=t._formatter;return(!i||t._lastFormat!==e)&&(i=q.get(t._lastFormat=e),t._formatter=i),i}updateStep(t){var e;const i=this;i.element.classList.toggle("b-hide-spinner",!t),i._step=t,t&&oe.isMobile?i.touchMoveListener||(i.touchMoveListener=x.on({element:i.input,touchmove:"onInputSwipe",thisObj:i,throttled:{buffer:150,alt:xt}})):(e=i.touchMoveListener)==null||e.call(i)}onInputSwipe(t){const{lastTouchmove:e}=this;if(e){const i=t.screenX-e.screenX,r=e.screenY-t.screenY,a=Math.abs(i)>Math.abs(r)?i:r;this[`doSpin${a>0?"Up":"Down"}`]()}t.preventDefault(),this.lastTouchmove=t}changeLargeStep(t){return t||this.step*10}get validity(){const t=this.value,e={};return t!=null&&(e.rangeUnderflow=!this.okMin(t),e.rangeOverflow=!this.okMax(t)),e.valid=!e.rangeUnderflow&&!e.rangeOverflow,e}changeValue(t,e){const i=this;if(t||t===0){let r;typeof t!="number"&&(t=typeof t=="string"?i.formatter.parse(t):Number(t),r=isNaN(t),r&&(t="")),!r&&i.format&&(t=i.formatter.round(t))}else t=void 0;return super.changeValue(t,e)}get inputValue(){let t=this.value;return t!=null&&this.format&&(t=this.formatValue(t)),t}};m(J,"$name","NumberField"),m(J,"type","numberfield"),m(J,"alias","number"),J.initClass(),J._$name="NumberField";var $=class extends ye{construct(t){super.construct(t),this.refresh()}updateSeconds(t){this.widgetMap.second[t?"show":"hide"]()}onFieldChange(){!this.isConfiguring&&!this.isRefreshing&&(this.value=this.pickerToTime())}onAmPmButtonClick({source:t}){this._pm=t.ref==="pmButton",this._value&&(this.value=this.pickerToTime())}onInternalKeyDown(t){var e;const i=this;switch(t.key){case"Escape":i.triggerTimeChange(i._initialValue),i.hide(),t.preventDefault();return;case"Enter":i.value=i.pickerToTime(),i.hide(),t.preventDefault();return}(e=super.onInternalKeyDown)==null||e.call(this,t)}pickerToTime(){const t=this,e=t._pm,{hour:i,minute:r,second:a}=t.widgetMap;i.format=t._is24Hour?"2>9":null;let n=i.value,l=new Date(t.value);return t._is24Hour||(e&&n<12&&(n=n+12),!e&&n===12&&(n=0)),l.setHours(n),l.setMinutes(r.value),t.seconds&&l.setSeconds(a.value),t._min&&(l=c.max(t._min,l)),t._max&&(l=c.min(t._max,l)),l}triggerTimeChange(t){this.trigger("timeChange",{time:t})}updateInitialValue(t){this.value=t}changeValue(t){return t&&(t=typeof t=="string"?c.parse(t,this.format):t),this.isVisible||(this._initialValue=t),t!=null?t:c.getTime(0)}updateValue(t){this.isVisible&&this.triggerTimeChange(t),this.refresh()}updateFormat(t){this._is24Hour=c.is24HourFormat(t),this.refresh()}changeMin(t){return typeof t=="string"?c.parse(t,this.format):t}changeMax(t){return typeof t=="string"?c.parse(t,this.format):t}refresh(){const t=this;if(!t.isConfiguring&&t.value){t.isRefreshing=!0;const{hour:e,minute:i,second:r,amButton:a,pmButton:n}=t.widgetMap,l=t.value,s=t._is24Hour,o=l.getHours(),u=t._pm=o>=12;t.element.classList[s?"add":"remove"]("b-24h"),e.min=s?0:1,e.max=s?23:12,e.value=s?o:o%12||12,i.value=l.getMinutes(),r.value=l.getSeconds(),a.pressed=!u,n.pressed=u,a.hidden=n.hidden=s,t.isRefreshing=!1}}};m($,"$name","TimePicker"),m($,"type","timepicker"),m($,"configurable",{floating:!0,layout:"hbox",items:{hour:{label:"L{TimePicker.hour}",type:"number",min:0,max:23,highlightExternalChange:!1,format:"2>9",wrapAround:!0},minute:{label:"L{TimePicker.minute}",type:"number",min:0,max:59,highlightExternalChange:!1,format:"2>9",wrapAround:!0},second:{hidden:!0,label:"L{TimePicker.second}",type:"number",min:0,max:59,highlightExternalChange:!1,format:"2>9",wrapAround:!0},amPm:{type:"buttongroup",items:{amButton:{type:"button",text:"AM",toggleGroup:"am-pm",cls:"b-blue",onClick:"up.onAmPmButtonClick"},pmButton:{type:"button",text:"PM",toggleGroup:"am-pm",cls:"b-blue",onClick:"up.onAmPmButtonClick"}}}},autoShow:!1,trapFocus:!0,seconds:null,value:{$config:{equal:"date"},value:null},format:null,max:null,min:null,initialValue:null}),$.initClass(),$._$name="TimePicker";var Q=class extends Le{static get configurable(){return{picker:{type:"timepicker",align:{align:"t0-b0",axisLock:!0}},format:"LT",triggers:{expand:{align:"end",handler:"onTriggerClick",compose:()=>({children:[{class:{"b-icon-clock-live":1}}]})},back:{align:"start",cls:"b-icon b-icon-angle-left b-step-trigger",key:"Shift+ArrowDown",handler:"onBackClick"},forward:{align:"end",cls:"b-icon b-icon-angle-right b-step-trigger",key:"Shift+ArrowUp",handler:"onForwardClick"}},min:null,max:null,step:"5m",stepTriggers:null,value:null,keepDate:!1}}changePicker(t,e){const i=this;return $.reconfigure(e,t,{owner:i,defaults:{value:i.value,forElement:i[i.pickerAlignElement],owner:i,align:{anchor:i.overlayAnchor,target:i[i.pickerAlignElement]},onTimeChange({time:r}){i._isUserAction=!0,i.value=r,i._isUserAction=!1}}})}onBackClick(){const t=this,{min:e}=t;if(!t.readOnly&&t.value){const i=c.add(t.value,-1*t.step.magnitude,t.step.unit);(!e||e.getTime()<=i)&&(t._isUserAction=!0,t.value=i,t._isUserAction=!1)}}onForwardClick(){const t=this,{max:e}=t;if(!t.readOnly&&t.value){const i=c.add(t.value,t.step.magnitude,t.step.unit);(!e||e.getTime()>=i)&&(t._isUserAction=!0,t.value=i,t._isUserAction=!1)}}get isValid(){const t=this;t.clearError("L{Field.minimumValueViolation}",!0),t.clearError("L{Field.maximumValueViolation}",!0);let e=t.value;if(e){if(e=e.getTime(),t._min&&t._min.getTime()>e)return t.setError("L{Field.minimumValueViolation}",!0),!1;if(t._max&&t._max.getTime()<e)return t.setError("L{Field.maximumValueViolation}",!0),!1}return super.isValid}hasChanged(t,e){return t!=null&&t.getTime&&(e!=null&&e.getTime)?t.getHours()!==e.getHours()||t.getMinutes()!==e.getMinutes()||t.getSeconds()!==e.getSeconds()||t.getMilliseconds()!==e.getMilliseconds():super.hasChanged(t,e)}showPicker(){const t=this,{picker:e,value:i}=t;t.readOnly||(e.value=i,e.format=t.format,e.maxTime=t.max,e.minTime=t.min,i||(t.value=e.value),super.showPicker(!0))}onPickerShow(){var t;super.onPickerShow(),this.pickerKeyDownRemover=(t=this.pickerKeyDownRemover)==null?void 0:t.call(this)}focusPicker(){this.picker.focus()}transformTimeValue(t){return t!=null&&(typeof t=="string"?(t=c.parse(t,this.format),this.keepDate&&(t=c.copyTimeValues(new Date(this.value),t))):t=new Date(t),c.isValidDate(t))?this.keepDate?t:c.getTime(t):null}changeMin(t){return this.transformTimeValue(t)}updateMin(t){const{input:e}=this;e&&(t==null?e.removeAttribute("min"):e.min=t),this.syncInvalid()}changeMax(t){return this.transformTimeValue(t)}updateMax(t){const{input:e}=this;e&&(t==null?e.removeAttribute("max"):e.max=t),this.syncInvalid()}changeValue(t,e){const i=this,r=i.transformTimeValue(t);if(t&&!r||i.isRequired&&t===""){i.setError("L{invalidTime}");return}if(i.clearError("L{invalidTime}"),i.hasChanged(e,r))return super.changeValue(r,e);i.inputting||i.syncInputFieldValue(!0)}updateValue(t,e){const{expand:i}=this.triggers;i&&t&&(i.element.firstElementChild.style.animationDelay=-((t.getHours()*60+t.getMinutes())/10)+"s"),super.updateValue(t,e)}changeStep(t,e){const i=typeof t;if(!t)return null;if(i==="number"?t={magnitude:Math.abs(t),unit:e?e.unit:"hour"}:i==="string"&&(t=c.parseDuration(t)),t!=null&&t.unit&&(t!=null&&t.magnitude))return t.magnitude<0&&(t={magnitude:-t.magnitude,unit:t.unit}),t}updateStep(t){this.element.classList[t?"remove":"add"]("b-no-steppers"),this.syncInvalid()}updateFormat(){this.syncInputFieldValue(!0)}get inputValue(){return c.format(this.value,this.format)}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue(!0)}};m(Q,"$name","TimeField"),m(Q,"type","timefield"),m(Q,"alias","time"),Q.initClass(),Q._$name="TimeField";var ee=class extends Ye{static get defaultConfig(){return{value:null,step:1,unit:null,defaultUnit:"day",magnitude:null,useAbbreviation:!1,allowNegative:!1,decimalPrecision:null,triggers:{spin:{type:"spintrigger"}},nullValue:null}}static get configurable(){return{min:null,max:null,allowedUnits:null}}changeMin(t){return typeof t=="string"?new X(t):t}changeMax(t){return typeof t=="string"?new X(t):t}changeAllowedUnits(t){return typeof t=="string"&&(t=t.split(",")),t.length>0&&!t.includes(this.defaultUnit)&&(this.defaultUnit=t[0]),t}updateAllowedUnits(t){this.allowedUnitsRe=new RegExp(`(${t.join("|")})`,"i")}get inputValue(){return this.value==null?"":this.calcValue(!0).toString(this.useAbbreviation)}set unit(t){this._unit=t,this.value=this.calcValue()}get unit(){return this._unit}get unitWithDefault(){return this._unit||this.defaultUnit}set magnitude(t){this.clearError("L{invalidUnit}"),this._magnitude=t,super.value=this.calcValue()}get magnitude(){return this._magnitude}roundMagnitude(t){return t&&this.decimalPrecision!=null?O.round(t,this.decimalPrecision):t}get allowDecimals(){return this.decimalPrecision!==0}get isValid(){const t=this,e=t.value==null||t.value&&t.value.magnitude==null;return super.isValid&&(e&&!t.required||!e&&(t.allowNegative||t.value.magnitude>=0))}internalOnChange(t){const e=this,i=e.value,r=e._lastValue;e.hasChanged(r,i)&&(e._lastValue=i,e.triggerFieldChange({value:i,event:t,userAction:!0,valid:e.isValid}))}onFocusOut(t){var e,i,r;return this.syncInputFieldValue(!0),(r=(i=(e=this.triggers)==null?void 0:e.spin)==null?void 0:i.clickRepeater)==null||r.cancel(),super.onFocusOut(t)}set value(t){const e=this;let i,r;if(e.getConfig("allowedUnits"),e.clearError("L{invalidUnit}"),typeof t=="number"||typeof t=="string"&&t.length>0&&!isNaN(t))i=Number(t),r=e.unitWithDefault;else if(typeof t=="string")if(/^\s*$/.test(t))i=null;else{const a=c.parseDuration(t,e.allowDecimals,e.unitWithDefault);a&&(!e.allowedUnitsRe||e.allowedUnitsRe.test(a.unit)?(r=a.unit,i=a.magnitude):e.setError("L{invalidUnit}"))}else t&&"unit"in t&&"magnitude"in t?(r=t.unit,i=t.magnitude):(r=null,i=null);(e._magnitude!==i||e._unit!=r)&&(e._magnitude=i,r&&(e._unit=r),super.value=e.calcValue())}okMax(t){return typeof t=="number"&&(t=new X({unit:this.unitWithDefault,magnitude:t})),this.max==null||t<=this.max}okMin(t){return typeof t=="number"&&(t=new X({unit:this.unitWithDefault,magnitude:t})),this.min==null||t>=this.min}get validity(){const t=this.value,e={};return t!=null&&(e.rangeUnderflow=!this.okMin(t),e.rangeOverflow=!this.okMax(t)),e.valid=!e.rangeUnderflow&&!e.rangeOverflow,e}get value(){return super.value}calcValue(t=!1){const e=this;return(!e._unit||e._magnitude==null)&&e.clearable?null:new X(t?this.roundMagnitude(e._magnitude):this._magnitude,e.unitWithDefault)}hasChanged(t,e){return e&&!t||!e&&t||e&&t&&!t.isEqual(e)}get milliseconds(){return this.value?this.value.milliseconds:0}onInternalKeyDown(t){t.key==="ArrowUp"?this.doSpinUp():t.key==="ArrowDown"&&this.doSpinDown()}doSpinUp(){const t=this;if(t.readOnly)return;let e=(t.magnitude||0)+t.step;t._isUserAction=!0,t.okMin(e)||(e=t.min),t.okMax(e)&&(t.value=e),t._isUserAction=!1}doSpinDown(){const t=this;if(t.readOnly)return;let e=(t.magnitude||0)-t.step;t.okMax(e)||(e=t.max),t.okMin(e)&&(t.allowNegative||(t.magnitude||0)>0)&&(t._isUserAction=!0,t.value=e,t._isUserAction=!1)}};m(ee,"$name","DurationField"),m(ee,"type","durationfield"),m(ee,"alias","duration"),ee.initClass(),ee._$name="DurationField";var xe={number:!0,boolean:!0,string:!0,date:!0,duration:!0,time:!0,auto:!0},wt={number:!0,boolean:!0,string:!0},we=t=>{var e;return((e=t==null?void 0:t.column)==null?void 0:e.type)==="duration"},St=t=>xe[t==null?void 0:t.type]||we(t),$e="",P="b-fieldfilterpicker",Tt={between:!0,notBetween:!0,isIncludedIn:!0,isNotIncludedIn:!0},Mt={textfield:!0,datefield:!0,numberfield:!0,durationfield:!0,combo:!0,timefield:!0},h={empty:{value:"empty",text:"L{isEmpty}",argCount:0},notEmpty:{value:"notEmpty",text:"L{isNotEmpty}",argCount:0},"=":{value:"=",text:"L{equals}"},"!=":{value:"!=",text:"L{doesNotEqual}"},">":{value:">",text:"L{isGreaterThan}"},"<":{value:"<",text:"L{isLessThan}"},">=":{value:">=",text:"L{isGreaterThanOrEqualTo}"},"<=":{value:"<=",text:"L{isLessThanOrEqualTo}"},between:{value:"between",text:"L{isBetween}",argCount:2},notBetween:{value:"notBetween",text:"L{isNotBetween}",argCount:2},isIncludedIn:{value:"isIncludedIn",text:"L{isOneOf}",isArrayValued:!0},isNotIncludedIn:{value:"isNotIncludedIn",text:"L{isNotOneOf}",isArrayValued:!0}},H=class U extends pe{static get defaultValueFieldPlaceholders(){return{string:"L{enterAValue}",number:"L{enterANumber}",date:"L{selectADate}",relation:"L{selectValue}",list:"L{selectOneOrMoreValues}",duration:"L{enterAValue}",time:"L{selectATime}",auto:"L{enterAValue}"}}afterConstruct(){const e=this;if(!e._fields)throw new Error(`${U.name} requires 'fields' to be configured.`);if(!e._filter)throw new Error(`${U.name} requires 'filter' to be configured.`);super.afterConstruct();const{widgetMap:{propertyPicker:i,operatorPicker:r,caseSensitive:a}}=e;i.ion({select:"onPropertySelect",thisObj:e}),r.ion({select:"onOperatorSelect",thisObj:e}),a.ion({change:"onCaseSensitiveChange",thisObj:e}),e.propertyFieldConfig&&i.setConfig(e.propertyFieldConfig),e.operatorFieldConfig&&r.setConfig(e.operatorFieldConfig),i.cls=e.allPropertyPickerClasses,r.cls=e.allOperatorPickerClasses,e.populateUIFromFilter()}changeDateFormat(e){return this.L(e)}get allChildInputs(){const{propertyPicker:e,operatorPicker:i,caseSensitive:r}=this.widgetMap;return[e,i,...this.valueFields,r]}updateDisabled(e){this.allChildInputs.forEach(i=>i.disabled=e)}updateReadOnly(e){const{propertyPicker:i,operatorPicker:r}=this.widgetMap;this.allChildInputs.forEach(a=>a.readOnly=e),i.readOnly=i.readOnly||e,r.readOnly=r.readOnly||e}updatePropertyLocked(e){this.widgetMap.propertyPicker.readOnly=e||this.readOnly,this.widgetMap.propertyPicker.cls=this.allPropertyPickerClasses}updateOperatorLocked(e){this.widgetMap.operatorPicker.readOnly=e||this.readOnly,this.widgetMap.operatorPicker.cls=this.allOperatorPickerClasses}changeOperators(e){const i=e!=null?e:U.defaultOperators;return Object.keys(i).reduce((r,a)=>({...r,[a]:i[a].map(n=>({...n,text:this.L(n.text)}))}),{})}changeFields(e){let i=e;return Array.isArray(e)&&(be.deprecate("Core","6.0.0","FieldOption[] deprecated, use Object<String, FieldOption> keyed by field name instead"),i=R.keyBy(i,"name")),i}get isMultiSelectValueField(){var e;return["isIncludedIn","isNotIncludedIn"].includes((e=this._filter)==null?void 0:e.operator)}get allPropertyPickerClasses(){var e;return new ue(`${P}-property`,(e=this.propertyFieldConfig)==null?void 0:e.cls,{[`${P}-combo-locked`]:this.propertyLocked})}get allOperatorPickerClasses(){var e;return new ue(`${P}-operator`,(e=this.operatorFieldConfig)==null?void 0:e.cls,{[`${P}-combo-locked`]:this.operatorLocked})}getValueFieldConfigs(){const e=this,{valueFieldCls:i,fieldType:r,_filter:{operator:a},onValueChange:n,filterValues:l,isMultiSelectValueField:s,operatorArgCount:o,getValueFieldConfig:u,fieldIsRelation:d,triggerChangeOnInput:y}=e,p=O.merge({},U.defaultValueFieldPlaceholders,e.valueFieldPlaceholders);if(!r||!a||o===0)return[];let f={type:"textfield",internalListeners:{change:n,input:y?n:null,thisObj:e},bubbleEvents:{keydown:!0},cls:i,dataset:{type:r},placeholder:e.L(p[s?"list":d?"relation":r]),highlightExternalChange:!1};return s||d?f={...f,type:"combo",multiSelect:s,createOnUnmatched:!0,items:e.getUniqueDataValues(l),value:l!=null?l:[]}:["number","date","boolean","duration","time"].includes(r)&&(f.type=`${r}field`),u&&(f=e.callback(u,e,[e.filter,f])),s?[f]:R.populate(o,v=>[{type:"widget",tag:"div",cls:`${P}-value-separator`,content:e.L("L{FieldFilterPicker.and}")},{...f,value:l[v]}]).flat().slice(1)}getUniqueDataValues(e=[]){var i;const r=this,{fieldType:a}=r;if(!r.store||!((i=r._filter)!=null&&i.property))return[];const{relatedDisplayField:n}=r.selectedField;let l,s;if(r.fieldIsRelation){const{foreignStore:o}=r.currentPropertyRelationConfig;n?(l=o.allRecords.reduce((u,d)=>(d.id!=null&&u.push({text:d.getValue(n),value:d.id}),u),[]),s=l.sort((u,d)=>r.sortStrings(u.text,d.text))):l=o.allRecords.map(u=>u.id)}else l=r.store.allRecords.map(o=>o.getValue(r._filter.property));if(!s){l.push(...e);const o=R.unique(l.reduce((u,d)=>(d!=null&&String(d).trim()!==""&&(a==="date"?u.push(d.valueOf()):a==="duration"?u.push(d.toString()):u.push(d)),u),[]));a==="string"?s=o.sort(r.sortStrings):a==="duration"?s=o.map(u=>new X(u)).filter(u=>u.isValid).sort(r.sortDurations):s=o.sort(r.sortNumerics),a==="date"?s=s.map(u=>{const d=new Date(u);return{text:c.format(d,r.dateFormat),value:u}}):a==="duration"&&(s=s.map(u=>u.toString()))}return s}sortStrings(e,i){return(e!=null?e:$e).localeCompare(i!=null?i:$e)}sortNumerics(e,i){return e-i}sortDurations(e,i){return e.valueOf()-i.valueOf()}get fieldType(){var e;return(e=this.selectedField)==null?void 0:e.type}get selectedField(){var e,i;return(i=this.fields)==null?void 0:i[(e=this._filter)==null?void 0:e.property]}get propertyOptions(){var e;return Object.entries((e=this.fields)!=null?e:{}).filter(([,i])=>xe[i.type]||we(i)).map(([i,{title:r}])=>({value:i,text:r!=null?r:i})).sort((i,r)=>i.text.localeCompare(r.text))}get operatorOptions(){return this.operators[this.fieldIsRelation?"relation":this.fieldType]}get fieldIsRelation(){return!!this.currentPropertyRelationConfig}get currentPropertyRelationConfig(){var e,i;return(i=(e=this.store)==null?void 0:e.modelRelations)==null?void 0:i.find(({foreignKey:r})=>{var a;return r===((a=this._filter)==null?void 0:a.property)})}updateOperators(){delete this._operatorArgCountLookup}get operatorArgCountLookup(){return this._operatorArgCountLookup||(this._operatorArgCountLookup=U.buildOperatorArgCountLookup(this.operators))}updateFilter(){this._filter&&this.onFilterChange()}updateStore(e){var i;(i=this._store)==null||i.un(this),e==null||e.ion({refresh:"onStoreRefresh",thisObj:this}),this.inferFieldTypes()}onStoreRefresh({action:e}){this.isMultiSelectValueField&&["dataset","create","update","delete"].includes(e)&&(this.valueFields[0].items=this.getUniqueDataValues(this.filterValues))}refreshValueFields(){const e=this,{valueFields:i}=e.widgetMap,{fieldType:r,operatorArgCount:a,_filter:{property:n,operator:l}}=e,s=Tt[l];i.element.className=new ue({[`${P}-values`]:!0,[`${P}-values-multiple`]:s,[`${P}-values-${r}`]:r!==void 0,"b-hidden":n==null||l==null||a===0}),i.removeAll(),i.add(e.getValueFieldConfigs()),delete e._valueFields,e.refreshCaseSensitive()}refreshCaseSensitive(){var e,i;const r=this,{fieldType:a,operatorArgCount:n,isMultiSelectValueField:l}=r,s=(e=r._filter)==null?void 0:e.operator,{caseSensitive:o}=r.widgetMap;o.hidden=a!=="string"||!s||l||n===0,o.checked=((i=r._filter)==null?void 0:i.caseSensitive)!==!1}onPropertySelect(e){var i;const r=this,{_filter:a}=r;a.property=((i=e.record)==null?void 0:i.data.value)||null,r.fieldType!==r._fieldType&&(a.operator=null,a.value=null),r._fieldType=a.type=r.fieldType,r.refreshOperatorPicker(),r.refreshValueFields(),r.triggerChange()}onCaseSensitiveChange({checked:e}){this._filter.caseSensitive=e,this.triggerChange()}onOperatorSelect(e){var i;const r=this,a=r.isMultiSelectValueField,n=this.operatorArgCount;r._filter.operator=((i=e.record)==null?void 0:i.data.value)||null,r.operatorArgCount!==n&&(r._filter.value=null),r.isMultiSelectValueField&&!a&&(r._filter.value=[]),r.refreshValueFields(),r.triggerChange()}triggerChange(){const{filter:e,isValid:i}=this;this.trigger("change",{filter:e,isValid:i})}onValueChange(){const e=this,{isMultiSelectValueField:i,fieldType:r,_filter:a}=e,n=this.valueFields.map(l=>l.value);i&&r==="date"?a.value=n[0].map(l=>new Date(l)):i&&r==="duration"?a.value=n[0].map(l=>new X(l)):(r==="date"&&a.operator==="between"&&c.isValidDate(n[1])&&n[1].setHours(23,59,59,999),a.value=n.length===1?n[0]:n),e.triggerChange()}refreshOperatorPicker(){const{operatorPicker:e}=this.widgetMap,{_filter:{operator:i,property:r},operatorOptions:a}=this;e.items=a,e.value=i,e.hidden=r===null}populateUIFromFilter(e=!1){const i=this,{filterValues:r,widgetMap:{propertyPicker:a,operatorPicker:n},_filter:{property:l,operator:s,disabled:o},propertyOptions:u,operatorOptions:d,isMultiSelectValueField:y}=i;a.items=u,n.items=d,n.hidden=l===null;let p=e;a.value!==l&&(a.value=l,i.refreshOperatorPicker(),p=!0),n.value!==s&&(s===null||!n.items.find(({value:f})=>f===s)?n.clear():n.value=s,p=!0),!s&&n.items.length===1&&(n.value=i._filter.operator=n.items[0].value),p&&i.refreshValueFields(),i.refreshCaseSensitive(),i.valueFields.forEach((f,v)=>{y&&(f.value.length>0||r.length>0)?i.fieldType==="date"?f.value=r.map(b=>b==null?void 0:b.valueOf()):i.fieldType==="duration"?f.value=r.map(b=>b==null?void 0:b.toString()):f.value=r:v>=r.length?f.clear():f.value=r[v]}),i.allChildInputs.forEach(f=>f.disabled=i.disabled||o)}get valueFields(){return this._valueFields||(this._valueFields=this.widgetMap.valueFields.queryAll(e=>e.owner===this.widgetMap.valueFields&&Mt[e.type]))}get filterValues(){var e;return((e=this._filter)==null?void 0:e.value)==null?[]:R.asArray(this._filter.value)}onFilterChange(){const e=this,i=e.fieldType,r=i!==e._fieldType;e._fieldType=e._filter.type=i,e.populateUIFromFilter(r)}get operatorArgCount(){const{fieldType:e,filter:{operator:i},operatorArgCountLookup:r}=this;return e&&i?r[e][i]:1}get isValid(){const e=this,{filter:i,fieldType:r,filterValues:a,isMultiSelectValueField:n,operatorArgCount:l}=e,{operator:s}=i,o=l>0&&(i==null?void 0:i.value)==null;return r&&s&&!o&&(n&&a.length>0||a.length===l)&&a.every(u=>u!=null&&(r!=="duration"||u.isValid))}focus(){var e,i,r;(r=(i=(e=this.valueFields.find(a=>a.isEmptyInput))!=null?e:this.operatorPicker)!=null?i:this.propertyPicker)==null||r.focus()}inferFieldTypes(){if(this.store&&this.fields)for(const[e,i]of Object.entries(this.fields))i.type==="auto"&&(i.type=U.inferFieldType(this.store,e))}static inferFieldType(e,i){var r;const a=(r=e.find(n=>n.getValue(i)!=null,!0))==null?void 0:r.getValue(i);if(a!==void 0){const n=typeof a;if(n==="object"&&a instanceof Date)return"date";if(wt[n])return n}return"auto"}};m(H,"$name","FieldFilterPicker"),m(H,"type","fieldfilterpicker"),m(H,"operators",{empty:{value:"empty",text:"L{isEmpty}",argCount:0},notEmpty:{value:"notEmpty",text:"L{isNotEmpty}",argCount:0},"=":{value:"=",text:"L{equals}"},"!=":{value:"!=",text:"L{doesNotEqual}"},">":{value:">",text:"L{isGreaterThan}"},"<":{value:"<",text:"L{isLessThan}"},">=":{value:">=",text:"L{isGreaterThanOrEqualTo}"},"<=":{value:"<=",text:"L{isLessThanOrEqualTo}"},between:{value:"between",text:"L{isBetween}",argCount:2},notBetween:{value:"notBetween",text:"L{isNotBetween}",argCount:2},isIncludedIn:{value:"isIncludedIn",text:"L{isOneOf}"},isNotIncludedIn:{value:"isNotIncludedIn",text:"L{isNotOneOf}"}}),m(H,"defaultOperators",{string:[h.empty,h.notEmpty,h["="],h["!="],{value:"includes",text:"L{contains}"},{value:"doesNotInclude",text:"L{doesNotContain}"},{value:"startsWith",text:"L{startsWith}"},{value:"endsWith",text:"L{endsWith}"},h.isIncludedIn,h.isNotIncludedIn],number:[h.empty,h.notEmpty,h["="],h["!="],h[">"],h["<"],h[">="],h["<="],h.between,h.notBetween,h.isIncludedIn,h.isNotIncludedIn],date:[h.empty,h.notEmpty,h["="],h["!="],{value:"<",text:"L{isBefore}"},{value:">",text:"L{isAfter}"},h.between,{value:"isToday",text:"L{isToday}",argCount:0},{value:"isTomorrow",text:"L{isTomorrow}",argCount:0},{value:"isYesterday",text:"L{isYesterday}",argCount:0},{value:"isThisWeek",text:"L{isThisWeek}",argCount:0},{value:"isNextWeek",text:"L{isNextWeek}",argCount:0},{value:"isLastWeek",text:"L{isLastWeek}",argCount:0},{value:"isThisMonth",text:"L{isThisMonth}",argCount:0},{value:"isNextMonth",text:"L{isNextMonth}",argCount:0},{value:"isLastMonth",text:"L{isLastMonth}",argCount:0},{value:"isThisYear",text:"L{isThisYear}",argCount:0},{value:"isNextYear",text:"L{isNextYear}",argCount:0},{value:"isLastYear",text:"L{isLastYear}",argCount:0},{value:"isYearToDate",text:"L{isYearToDate}",argCount:0},h.isIncludedIn,h.isNotIncludedIn],boolean:[{value:"isTrue",text:"L{isTrue}",argCount:0},{value:"isFalse",text:"L{isFalse}",argCount:0}],duration:[h.empty,h.notEmpty,h["="],h["!="],h[">"],h["<"],h[">="],h["<="],h.between,h.notBetween,h.isIncludedIn,h.isNotIncludedIn],time:[h.empty,h.notEmpty,h["="],h["!="],h[">"],h["<"],h[">="],h["<="],h.between,h.notBetween,h.isIncludedIn,h.isNotIncludedIn],relation:[h.empty,h.notEmpty,h["="],h["!="],h.isIncludedIn,h.isNotIncludedIn],auto:[{value:"*",text:"L{contains}"}]}),m(H,"configurable",{fields:null,disabled:!1,readOnly:!1,layout:"vbox",propertyLocked:!1,operatorLocked:!1,filter:null,propertyFieldConfig:null,operatorFieldConfig:null,valueFieldCls:null,triggerChangeOnInput:!0,items:{inputs:{type:"container",layout:"hbox",cls:`${P}-inputs`,items:{propertyPicker:{type:"combo",items:{},cls:`${P}-property`,placeholder:"L{FieldFilterPicker.selectAProperty}",highlightExternalChange:!1},operatorPicker:{type:"combo",items:{},cls:`${P}-operator`,placeholder:"L{FieldFilterPicker.selectAnOperator}",highlightExternalChange:!1},valueFields:{type:"container",cls:`${P}-values`,items:{}}}},caseSensitive:{type:"checkbox",text:"L{FieldFilterPicker.caseSensitive}",cls:`${P}-case-sensitive`}},operators:H.defaultOperators,dateFormat:"L{FieldFilterPicker.dateFormat}",store:null,valueFieldPlaceholders:null,getValueFieldConfig:null}),m(H,"buildOperatorArgCountLookup",t=>R.keyBy(Object.entries(t),([e])=>e,([,e])=>R.keyBy(e,({value:i})=>i,({argCount:i})=>i===void 0?1:i)));var Se=H;Se.initClass(),Se._$name="FieldFilterPicker";var te=class extends E{compose(){const{text:t,html:e}=this;return{tag:"label",text:t,html:e}}};m(te,"$name","Label"),m(te,"type","label"),m(te,"configurable",{text:null,localizableProperties:["text"]}),te.initClass(),te._$name="Label";var z=class ie extends pe{afterConstruct(){const e=this;e.validateConfig();const{addFilterButton:i}=e.widgetMap;i.ion({click:"addFilter",thisObj:e}),i.text=e.L(i.text),e.store&&e.updateStore(e.store),super.afterConstruct()}changeDateFormat(e){return this.L(e)}validateConfig(){if(!this.fields&&!this.store)throw new Error("FieldFilterPickerGroup requires either a 'fields' or 'store' config property.")}updateFields(e){this.widgetMap.pickers.childItems.forEach(i=>i.fields=e)}updateFilters(e,i){const r=this;i&&i.filter(a=>!e.find(n=>n.id===a.id)).forEach(a=>{var n;return(n=r.store)==null?void 0:n.removeFilter(a.id)}),e.forEach(a=>a.id=a.id||r.nextFilterId),r.widgetMap.pickers.items=(e==null?void 0:e.map(a=>r.getPickerRowConfig(a)))||[]}changeFilters(e){const{canManageFilter:i}=this;return e&&i?e.filter(r=>this.callback(i,this,[r])):e}updateStore(e){const i=this;i.detachListeners("store"),e&&(i.widgetMap.pickers.childItems.forEach(({widgetMap:{filterPicker:{filter:r,isValid:a}}})=>{e.removeFilter(r.id,!0),a&&e.addFilter(r,!0)}),e.filter(),i.appendFiltersFromStore(),e.ion({name:"store",filter:"onStoreFilter",thisObj:i})),i.widgetMap.pickers.childItems.forEach(r=>r.store=e)}updateShowAddFilterButton(e){this.widgetMap.addFilterButton.hidden=!e}updateAddFilterButtonText(e){this.widgetMap.addFilterButton.text=e!=null?e:ie.addFilterButtonDefaultText}appendFiltersFromStore(){const e=this;e.store.filters.forEach(i=>{var r;const a=e.canManage(i),{property:n,operator:l,id:s}=i;a&&n&&l&&!((r=e.filters)!=null&&r.find(o=>o.id===s))&&e.appendFilter(i)})}canManage(e){const i=this;return!i.canManageFilter||i.callback(i.canManageFilter,i,[e])===!0}getFilterPickerConfig(e){const i=this,{fields:r,store:a,disabled:n,readOnly:l,valueFieldCls:s,operators:o,limitToProperty:u,dateFormat:d,getFieldFilterPickerConfig:y,triggerChangeOnInput:p}=i;return{type:i.constructor.childPickerType,fields:r!=null?r:i.getFieldsFromStore(a),filter:e,store:a,disabled:n,readOnly:l,propertyLocked:!!u,valueFieldCls:s,operators:o,dateFormat:d,internalListeners:{change:"onFilterPickerChange",thisObj:i},flex:1,triggerChangeOnInput:p,...y?i.callback(y,i,[e]):void 0}}getFieldsFromStore(e){var i,r;return Object.fromEntries((r=(i=e.modelClass)==null?void 0:i.fields.map(({name:a,type:n})=>[a,{type:n}]))!=null?r:[])}getPickerRowConfig(e){const i=this,{disabled:r,readOnly:a,canDeleteFilter:n}=i,l=!(n&&i.callback(n,i,[e])===!1);return{type:"container",layout:"box",cls:{[`b-${ie.type}-row`]:!0,[`b-${ie.type}-row-removable`]:l},dataset:{separatorText:i.L("L{FieldFilterPicker.and}")},items:{activeCheckbox:{type:"checkbox",disabled:r,readOnly:a,checked:!e.disabled,internalListeners:{change:"onFilterActiveChange",thisObj:i},cls:`b-${ie.type}-filter-active`},filterPicker:i.getFilterPickerConfig(e),removeButton:{type:"button",ref:"removeButton",disabled:r,readOnly:a,hidden:!l,cls:`b-transparent b-${ie.type}-remove`,icon:"b-fa-trash",internalListeners:{click:"removeFilter",thisObj:i}}}}}get allInputs(){const e=[this.constructor.childPickerType,"button","checkbox"];return this.queryAll(i=>e.includes(i.type))}updateDisabled(e){this.allInputs.forEach(i=>i.disabled=e)}updateReadOnly(e){this.allInputs.forEach(i=>i.readOnly=e)}onFilterActiveChange({source:e,checked:i}){const r=this,a=r.getFilterIndex(e),n=r.filters[a],l=r.getFilterPicker(a);n.disabled=!i,l.onFilterChange(),r.store&&l.isValid&&r.store.addFilter(n,!0),r.updateStoreFilter(),r.triggerChange()}onFilterPickerChange({source:e,filter:i,isValid:r}){const a=this,{store:n}=a,l=a.getFilterIndex(e);n&&(n.removeFilter(i.id,!0),r&&n.addFilter(i,!0),a.updateStoreFilter()),Object.assign(a.filters[l],i),a.triggerChange()}getFilterIndex(e){return this.widgetMap.pickers.childItems.indexOf(e.containingWidget)}getPickerRow(e){return this.widgetMap.pickers.childItems[e]}getFilterPicker(e){return this.getPickerRow(e).widgetMap.filterPicker}get nextFilterId(){return this._nextId=(this._nextId||0)+1,`${this.id}-filter-${this._nextId}`}removeFilter({source:e}){const i=this,r=i.getFilterIndex(e),a=i.filters[r],n=i.getPickerRow(r),l=i.query(s=>s.isFocusable&&s.type!=="container"&&!n.contains(s));l&&l.focus(),i.removeFilterAt(r),i.store&&(i.store.removeFilter(a.id,!0),i.updateStoreFilter()),i.trigger("remove",{filter:a}),i.triggerChange()}addFilter({property:e=null,operator:i=null,value:r=null}={}){var a;const n=this,{filters:l}=n,s={property:n.limitToProperty||e,operator:i,value:r,disabled:!1,id:n.nextFilterId,caseSensitive:!1};n.trigger("beforeAddFilter",{filter:s})&&(n.appendFilter(s),n.getFilterPicker(l.length-1).isValid&&((a=n.store)==null||a.addFilter(s,!0),n.store&&n.updateStoreFilter()),n.trigger("add",{filter:s}),n.triggerChange())}appendFilter(e){const i=this;(!i.limitToProperty||e.property===i.limitToProperty)&&(i.filters.push(e),i.widgetMap.pickers.add(i.getPickerRowConfig(e,i.filters.length-1)))}onStoreFilter(e){const i=this;if(i._isUpdatingStore)return;const{filters:r}=e,a=r.values.reduce((n,l)=>({...n,[l.id]:l}),{});for(let n=i.filters.length-1;n>=0;n--){const l=i.filters[n],s=a[l.id],o=i.getPickerRow(n);if(o){const{filterPicker:u,activeCheckbox:d}=o.widgetMap;if(!s&&u.isValid)i.removeFilterAt(n);else if(s!==void 0){const{operator:y,value:p,property:f,disabled:v,caseSensitive:b}=s;l!==s&&Object.assign(l,{operator:y,value:p,property:f,disabled:v,caseSensitive:b}),u.filter=l,u.onFilterChange(),d.checked=!v}}}i.appendFiltersFromStore(),i.triggerChange()}removeFilterAt(e){const{widgetMap:{pickers:i},filters:r}=this;i.remove(i.childItems[e]),r.splice(e,1),this.triggerChange()}updateStoreFilter(){var e;this._isUpdatingStore=!0,(e=this.store)==null||e.filter(),this._isUpdatingStore=!1}get value(){return this.filters}triggerChange(){const{filters:e}=this,i=e.filter((r,a)=>this.getPickerRow(a).widgetMap.filterPicker.isValid);this.trigger("change",{filters:e,validFilters:i})}activateAll(){this.setAllActiveStatus(!0)}deactivateAll(){this.setAllActiveStatus(!1)}setAllActiveStatus(e){const i=this,{_filters:r,store:a}=i;r.forEach((n,l)=>{if(e===n.disabled){const{filterPicker:s,activeCheckbox:o}=i.getPickerRow(l).widgetMap;n.disabled=!e,s.onFilterChange(),o.checked=e,e&&a&&s.isValid&&a.addFilter(n,!0)}}),i.updateStoreFilter()}focus(){var e;const{length:i}=this._filters;i>0&&((e=this.getPickerRow(i-1))==null||e.widgetMap.filterPicker.focus())}};m(z,"$name","FieldFilterPickerGroup"),m(z,"type","fieldfilterpickergroup"),m(z,"addFilterButtonDefaultText","L{FieldFilterPickerGroup.addFilter}"),m(z,"configurable",{filters:[],fields:null,disabled:!1,readOnly:!1,layout:"vbox",store:null,limitToProperty:null,valueFieldCls:null,showAddFilterButton:!0,canDeleteFilter:null,getFieldFilterPickerConfig:null,canManageFilter:null,addFilterButtonText:null,triggerChangeOnInput:!0,items:{pickers:{type:"container",layout:"vbox",scrollable:!0,items:{}},addFilterButton:{type:"button",text:z.addFilterButtonDefaultText,cls:`b-${z.type}-add-button`,hidden:!0}},operators:null,dateFormat:"L{FieldFilterPicker.dateFormat}"}),m(z,"childPickerType","fieldfilterpicker");var Te=z;Te.initClass(),Te._$name="FieldFilterPickerGroup";var Ue=[{ref:"cancelButton",cls:"b-messagedialog-cancelbutton b-gray",text:"L{Object.Cancel}",onClick:"up.onCancelClick"},{ref:"okButton",cls:"b-messagedialog-okbutton b-raised b-blue",text:"L{Object.Ok}",onClick:"up.onOkClick"}];oe.isWindows&&Ue.reverse();var Me=class Je extends st{static get configurable(){return{centered:!0,modal:!0,hidden:!0,autoShow:!1,closeAction:"hide",title:"\xA0",lazyItems:{$config:["lazy"],value:[{cls:"b-messagedialog-message",ref:"message"},{type:"textfield",cls:"b-messagedialog-input",ref:"input"}]},showClass:null,bbar:{overflow:null,items:Ue}}}construct(){this.okButton=this.yesButton=1,this.cancelButton=3,super.construct(...arguments)}destroy(){}async confirm(){return this.showDialog("confirm",...arguments)}async alert(){return this.showDialog("alert",...arguments)}async prompt({textField:e}){const i=this.widgetMap.input;return E.reconfigure(i,e),i.value="",this.showDialog("prompt",...arguments)}showDialog(e,{message:i="",title:r="\xA0",cancelButton:a,okButton:n,rootElement:l=document.body}){const s=this;return s.rootElement=l,s.getConfig("lazyItems"),s.title=s.optionalL(r),s.widgetMap.message.html=s.optionalL(i),s.showClass=`b-messagedialog-${e}`,n&&(n=typeof n=="string"?{text:n}:n),a&&(a=typeof a=="string"?{text:a}:a),n=Object.assign({},s.widgetMap.okButton.initialConfig,n),a=Object.assign({},s.widgetMap.cancelButton.initialConfig,a),n.text=s.optionalL(n.text),a.text=s.optionalL(a.text),E.reconfigure(s.widgetMap.okButton,n),E.reconfigure(s.widgetMap.cancelButton,a),s.show(),s.promise=new Promise(o=>{s.resolve=o})}show(){const e=g.getActiveElement(this.element);return this.owner=this.element.contains(e)?null:Je.fromElement(document.activeElement),super.show(...arguments)}updateShowClass(e,i){const{classList:r}=this.element;i&&r.remove(i),e&&r.add(e)}doResolve(e){const i=this,{resolve:r}=i;if(r){const a=i.showClass==="b-messagedialog-prompt";if(a&&e===i.okButton&&!i.widgetMap.input.isValid)return;i.resolve=i.reject=i.promise=null,r(a?{button:e,text:i.widgetMap.input.value}:e),i.hide()}}onInternalKeyDown(e){e.key==="Escape"?(e.stopImmediatePropagation(),this.onCancelClick()):e.key==="Enter"&&!e.target.closest(".b-button")&&(e.stopImmediatePropagation(),e.preventDefault(),this.onOkClick()),super.onInternalKeyDown(e)}onOkClick(){this.doResolve(Fe.okButton)}onCancelClick(){this.doResolve(Fe.cancelButton)}};m(Me,"$name","MessageDialog"),m(Me,"type","messagedialog");var je=Me;je.initClass();var Fe=new Proxy({},{get(t,e){const i=t.instance||(t.instance=new je({rootElement:document.body})),r=i[e];return typeof r=="function"?r.bind(i):r}}),Ft=Fe;export{ke as ButtonGroup,W as CalendarPanel,vt as Clipboardable_default,Z as DateField,G as DatePicker,K as DisplayField,Ae as DragHelper,ee as DurationField,Se as FieldFilterPicker,Te as FieldFilterPickerGroup,ne as Formatter,te as Label,Ft as MessageDialog_default,se as Month,J as NumberField,q as NumberFormat,Ve as Override,ve as ResizeHelper,Q as TimeField,$ as TimePicker,ae as Toast,Ne as WidgetHelper,V as YearPicker,xe as filterableFieldDataTypes,St as isFilterableField,we as isSupportedDurationField};
//# sourceMappingURL=chunk-6ZLMCHE5.js.map
